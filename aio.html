<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Library Carpentry: The Unix Shell: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav library"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="lc-logo" alt="Library Carpentry" src="assets/images/library-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav library" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Library Carpentry" src="assets/images/library-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Library Carpentry: The Unix Shell
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Library Carpentry: The Unix Shell
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Library Carpentry: The Unix Shell
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress library">
    <div class="progress-bar library" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-intro-shell.html">1. What is the shell?</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-navigating-the-filesystem.html">2. Navigating the filesystem</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-working-with-files-and-folders.html">3. Working with files and directories</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-loops.html">4. Automating the tedious with loops</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-counting-mining.html">5. Counting and mining with the shell</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-free-text.html">6. Working with free text</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li>
<li><a href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-intro-shell"><p>Content from <a href="01-intro-shell.html">What is the shell?</a></p>
<hr>
<p>Last updated on 2023-05-08 |

        <a href="https://github.com/librarycarpentry/lc-shell/edit/main/episodes/01-intro-shell.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is the shell?</li>
<li>What is the command line?</li>
<li>Why should I use it?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe the basics of the Unix shell</li>
<li>Explain why and how to use the command line</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction-what-is-the-shell-and-why-should-i-use-it">Introduction: What is the shell, and why should I use it?<a class="anchor" aria-label="anchor" href="#introduction-what-is-the-shell-and-why-should-i-use-it"></a>
<a class="anchor" aria-label="anchor" href="#introduction-what-is-the-shell-and-why-should-i-use-it"></a>
</h2>
<hr class="half-width">
<p>If you’ve ever had to deal with large amounts of data or large
numbers of digital files scattered across your computer or a remote
server, you know that copying, moving, renaming, counting, searching
through, or otherwise processing those files manually can be immensely
time-consuming and error-prone. Fortunately, there is an extraordinarily
powerful and flexible tool designed for just that purpose.</p>
<p>The shell (sometimes referred to as the “Unix shell”, for the
operating system where it was first developed) is a program that allows
you to interact with your computer using typed text commands. It is the
primary interface used on Linux and Unix-based systems, such as macOS,
and can be installed optionally on other operating systems such as
Windows.</p>
<p>It is the definitive example of a “command line interface”, where
instructions are given to the computer by typing in commands, and the
computer responds by performing a task or generating an output. This
output is often directed to the screen, but can be directed to a file,
or even to other commands, creating powerful chains of actions with very
little effort.</p>
<p>Using a shell sometimes feels more like programming than like using a
mouse. Commands are terse (often only a couple of characters long),
their names are frequently cryptic, and their output is lines of text
rather than something visual like a graph. On the other hand, with only
a few keystrokes, the shell allows you to combine existing tools into
powerful pipelines and to handle large volumes of data automatically.
This automation not only makes you more productive, but also improves
the reproducibility of your workflows by allowing you to save and then
repeat them with a few simple commands. Understanding the basics of the
shell provides a useful foundation for learning to program, since some
of the concepts you will learn here—such as loops, values, and
variables—will translate to programming.</p>
<p>The shell is one of the most productive programming environments ever
created. Once mastered, you can use it to experiment with different
commands interactively, then use what you have learned to automate your
work.</p>
<p>In this session we will introduce task automation by looking at how
data can be manipulated, counted, and mined using the shell. The session
will cover a small number of basic commands, which will constitute
building blocks upon which more complex commands can be constructed to
fit your data or project. Even if you do not do your own programming or
your work currently does not involve the command line, knowing some
basics about the shell can be useful.</p>
<p><em>Note to Lesson Instructor: Consider providing an example here of
how you’ve used the Unix shell to solve a problem in the last week or
month</em></p>
<div class="section level3">
<h3 id="where-is-my-shell">Where is my shell?<a class="anchor" aria-label="anchor" href="#where-is-my-shell"></a>
</h3>
<p>The shell is a program that is usually launched on your computer much
in the way you would start any other program. However, there are
numerous kinds of shells with different names, and they may or may not
be already installed. The shell is central to Linux-based computers, and
macOS machines ship with Terminal, a shell program. For Windows users,
popular shells such as Cygwin or Git Bash provide a Unix-like interface,
but may need to be installed separately. In Windows 10, <a href="https://docs.microsoft.com/en-us/windows/wsl/install" class="external-link">the Windows
Subsystem for Linux</a> also gives access to a Bash shell command-line
tool.</p>
<p>For this lesson, we will use Git Bash for Windows users, Terminal for
macOS, and the shell for Linux users.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>The shell is powerful</li>
<li>The shell can be used to copy, move, and combine multiple files</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-02-navigating-the-filesystem"><p>Content from <a href="02-navigating-the-filesystem.html">Navigating the filesystem</a></p>
<hr>
<p>Last updated on 2024-05-02 |

        <a href="https://github.com/librarycarpentry/lc-shell/edit/main/episodes/02-navigating-the-filesystem.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you move around the filesystem in the shell?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use shell commands to work with directories and files</li>
<li>Use shell commands to find and manipulate data</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="navigating-the-shell">Navigating the shell<a class="anchor" aria-label="anchor" href="#navigating-the-shell"></a>
<a class="anchor" aria-label="anchor" href="#navigating-the-shell"></a>
</h2>
<hr class="half-width">
<p>We will begin with the basics of navigating the Unix shell.</p>
<p>Let’s start by opening the shell. This likely results in seeing a
black or white window with a cursor flashing next to a dollar sign. This
is our command line, and the <code>$</code> is the command
<strong>prompt</strong> to show that the system is ready for our input.
The appearance of the prompt will vary from system to system, depending
on how the set up has been configured. Other common prompts include the
<code>%</code> or <code>#</code> signs, but we will use <code>$</code>
in this lesson to represent the prompt generally.</p>
<p>When working in the shell, you are always <em>somewhere</em> in the
computer’s file system, in some folder (directory). We will therefore
start by finding out where we are by using the <code>pwd</code> command,
which you can use whenever you are unsure about where you are. It stands
for “print working directory” and the result of the command is printed
to your standard output, which is the screen.</p>
<p>Let’s type <code>pwd</code> and press enter to execute the command
(Note that the <code>$</code> sign is used to indicate a command to be
typed on the command prompt, but we never type the <code>$</code> sign
itself, just what follows after it.):</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/riley</code></pre>
</div>
<p>The output will be a path to your home directory. Let’s check if we
recognise it by looking at the contents of the directory. To do that, we
use the <code>ls</code> command. This stands for “list” and the result
is a print out of all the contents in the directory:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications Documents    Library      Music        Public
Desktop      Downloads    Movies       Pictures</code></pre>
</div>
<p>We may want more information than just a list of files and
directories. We can get this by specifying various
<strong>flags</strong> (also known as <code>options</code>,
<code>parameters</code>, or, most frequently, <code>arguments</code>) to
go with our basic commands. Arguments modify the workings of the command
by telling the computer what sort of output or manipulation we want.</p>
<p>If we type <code>ls -l</code> and press enter, the computer returns a
list of files that contains information similar to what we would find in
our Finder (Mac) or Explorer (Windows): the size of the files in bytes,
the date it was created or last modified, and the file name.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>total 0
drwx------+  6 riley  staff   204 Jul 16 11:50 Desktop
drwx------+  3 riley  staff   102 Jul 16 11:30 Documents
drwx------+  3 riley  staff   102 Jul 16 11:30 Downloads
drwx------@ 46 riley  staff  1564 Jul 16 11:38 Library
drwx------+  3 riley  staff   102 Jul 16 11:30 Movies
drwx------+  3 riley  staff   102 Jul 16 11:30 Music
drwx------+  3 riley  staff   102 Jul 16 11:30 Pictures
drwxr-xr-x+  5 riley  staff   170 Jul 16 11:30 Public</code></pre>
</div>
<p>In everyday usage we are more accustomed to units of measurement like
kilobytes, megabytes, and gigabytes. Luckily, there’s another flag
<code>-h</code> that when used with the -l option, prints unit suffixes:
Byte, Kilobyte, Megabyte, Gigabyte, Terabyte and Petabyte in order to
reduce the number of digits to three or fewer using base 2 for
sizes.</p>
<p>Now <code>ls -h</code> won’t work on its own. When we want to combine
two flags, we can just run them together. So, by typing
<code>ls -lh</code> and pressing enter we receive an output in a
human-readable format (note: the order here doesn’t matter).</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-lh</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>total 0
drwx------+  6 riley  staff   204B Jul 16 11:50 Desktop
drwx------+  3 riley  staff   102B Jul 16 11:30 Documents
drwx------+  3 riley  staff   102B Jul 16 11:30 Downloads
drwx------@ 46 riley  staff   1.5K Jul 16 11:38 Library
drwx------+  3 riley  staff   102B Jul 16 11:30 Movies
drwx------+  3 riley  staff   102B Jul 16 11:30 Music
drwx------+  3 riley  staff   102B Jul 16 11:30 Pictures
drwxr-xr-x+  5 riley  staff   170B Jul 16 11:30 Public</code></pre>
</div>
<p>We’ve now spent a great deal of time in our home directory. Let’s go
somewhere else. We can do that through the <code>cd</code> or Change
Directory command: (Note: On Windows and Mac, by default, the case of
the file/directory doesn’t matter. On Linux it does.)</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> cd Desktop</span></code></pre>
</div>
<p>Notice that the command didn’t output anything. This means that it
was carried out successfully. Let’s check by using <code>pwd</code>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/riley/Desktop</code></pre>
</div>
<p>If something had gone wrong, however, the command would have told
you. Let’s test that by trying to move into a non-existent
directory:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> cd <span class="st">"things to learn about the shell"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>bash: cd: things to learn about the shell: No such file or directory</code></pre>
</div>
<p>Notice that we surrounded the name by quotation marks. The
<em>arguments</em> given to any shell command are separated by spaces,
so a way to let them know that we mean ‘one single thing called “things
to learn about the shell”’, not ‘six different things’, is to use
(single or double) quotation marks.</p>
<p>We’ve now seen how we can go ‘down’ through our directory structure
(as in into more nested directories). If we want to go back, we can type
<code>cd ..</code>. This moves us ‘up’ one directory, putting us back
where we started. <strong>If we ever get completely lost, the command
<code>cd</code> without any arguments will bring us right back to the
home directory, the place where we started.</strong></p>
<div id="previous-directory" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="previous-directory" class="callout-inner">
<h3 class="callout-title">Previous Directory<a class="anchor" aria-label="anchor" href="#previous-directory"></a>
</h3>
<div class="callout-content">
<p>To switch back and forth between two directories use
<code>cd -</code></p>
</div>
</div>
</div>
<div id="try-exploring" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="try-exploring" class="callout-inner">
<h3 class="callout-title">Try exploring<a class="anchor" aria-label="anchor" href="#try-exploring"></a>
</h3>
<div class="callout-content">
<p>Move around the computer, get used to moving in and out of
directories, see how different file types appear in the Unix shell. Be
sure to use the <code>pwd</code> and <code>cd</code> commands, and the
different flags for the <code>ls</code> command you learned so far.</p>
<p>If you run Windows, also try typing <code>explorer .</code> to open
Explorer for the current directory (the single dot means “current
directory”). If you’re on a Mac, try <code>open .</code> and for Linux
try <code>xdg-open .</code> to open their graphical file manager.</p>
</div>
</div>
</div>
<p>Being able to navigate the file system is very important for using
the Unix shell effectively. As we become more comfortable, we can get
very quickly to the directory that we want.</p>
<div id="getting-help" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="getting-help" class="callout-inner">
<h3 class="callout-title">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h3>
<div class="callout-content">
<p>Use the <code>man</code> command to invoke the manual page
(documentation) for a shell command. For example, <code>man ls</code>
displays all the arguments available to you - which saves you
remembering them all! Try this for each command you’ve learned so far.
Use the <kbd>spacebar</kbd> to navigate the manual pages. Use
<kbd>q</kbd> at any time to quit.</p>
<p><strong><em>Note</em>: this command is for Mac and Linux users
only</strong>. It does not work directly for Windows users. If you use
Windows, you can search for the shell command on <a href="https://man.he.net/" class="external-link">http://man.he.net/</a>, and view the
associated manual page. In some systems the command name followed by
<code>--help</code> will work, e.g. <code>ls --help</code>.</p>
<p>Also, the manual lists commands individually, e.g., although
<code>-h</code> can only be used together with the <code>-l</code>
option, you’ll find it listed as <code>-h</code> in the manual, not as
<code>-lh</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Answer
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> man ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>LS(1)                     BSD General Commands Manual                    LS(1)

NAME
    ls -- list directory contents

SYNOPSIS
    ls [-ABCFGHLOPRSTUW@abcdefghiklmnopqrstuwx1] [file ...]

DESCRIPTION
    For each operand that names a file of a type other than directory, ls
    displays its name as well as any requested, associated information.  For
    each operand that names a file of type directory, ls displays the names
    of files contained within that directory, as well as any requested, asso-
    ciated information.

    If no operands are given, the contents of the current directory are dis-
    played.  If more than one operand is given, non-directory operands are
    displayed first; directory and non-directory operands are sorted sepa-
    rately and in lexicographical order.

    The following options are available:

    -@      Display extended attribute keys and sizes in long (-l) output.

    -1      (The numeric digit ``one''.)  Force output to be one entry per
            line.  This is the default when output is not to a terminal.

    -A      List all entries except for . and ...  Always set for the super-
            user.

...several more pages...

BUGS
    To maintain backward compatibility, the relationships between the many
    options are quite complex.

BSD                              May 19, 2002                              BSD
</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="find-out-about-advanced-ls-commands" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="find-out-about-advanced-ls-commands" class="callout-inner">
<h3 class="callout-title">Find out about advanced <code>ls</code>
commands<a class="anchor" aria-label="anchor" href="#find-out-about-advanced-ls-commands"></a>
</h3>
<div class="callout-content">
<p>Find out, using the manual page, how to list the files in a directory
ordered by their filesize. Try it out in different directories. Can you
combine it with the <code>-l</code> <em>argument</em> you learned
before?</p>
<p>Afterwards, find out how you can order a list of files based on their
last modification date. Try ordering files in different directories.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Answer
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>To order files in a directory by their filesize, in combination with
the <code>-l</code> argument:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-lS</span></span></code></pre>
</div>
<p>Note that the <code>S</code> is <strong>case-sensitive!</strong></p>
<p>To order files in a directory by their last modification date, in
combination with the <code>-l</code> argument:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-lt</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Knowing where you are in your directory structure is key to working
with the shell</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-03-working-with-files-and-folders"><p>Content from <a href="03-working-with-files-and-folders.html">Working with files and directories</a></p>
<hr>
<p>Last updated on 2024-02-23 |

        <a href="https://github.com/librarycarpentry/lc-shell/edit/main/episodes/03-working-with-files-and-folders.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I copy, move, and delete files and directories?</li>
<li>How can I read files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Work with files and directories from the command line</li>
<li>Use tab completion to limit typing</li>
<li>Use commands to print and view files and parts of files</li>
<li>Use commands to move/rename, copy, and delete files</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="working-with-files-and-folders">Working with files and folders<a class="anchor" aria-label="anchor" href="#working-with-files-and-folders"></a>
<a class="anchor" aria-label="anchor" href="#working-with-files-and-folders"></a>
</h2>
<hr class="half-width">
<p>As well as navigating directories, we can interact with files on the
command line: we can read them, open them, run them, and even edit them.
In fact, there’s really no limit to what we <em>can</em> do in the
shell, but even experienced shell users still switch to graphical user
interfaces (GUIs) for many tasks, such as editing formatted text
documents (Word or OpenOffice), browsing the web, editing images, etc.
But if we wanted to make the same crop on hundreds of images, say, the
pages of a scanned book, then we could automate that cropping work by
using shell commands.</p>
<p>Before getting started, we will use <code>ls</code> to list the
contents of our current directory. Using <code>ls</code> periodically to
view your options is useful to orient oneself.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications Documents    Library      Music        Public
Desktop      Downloads    Movies       Pictures</code></pre>
</div>
<p>We will try a few basic ways to interact with files. Let’s first move
into the <code>shell-lesson</code> directory on your desktop.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> cd</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> cd Desktop/shell-lesson</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/riley/Desktop/shell-lesson</code></pre>
</div>
<p>Here, we will create a new directory and move into it:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> mkdir firstdir</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">$</span> cd firstdir</span></code></pre>
</div>
<p>Here we used the <code>mkdir</code> command (meaning ‘make
directories’) to create a directory named ‘firstdir’. Then we moved into
that directory using the <code>cd</code> command.</p>
<p>But wait! There’s a trick to make things a bit quicker. Let’s go up
one directory.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> cd ..</span></code></pre>
</div>
<p>Instead of typing <code>cd firstdir</code>, let’s try to type
<code>cd f</code> and then press the Tab key. We notice that the shell
completes the line to <code>cd firstdir/</code>.</p>
<div id="tab-for-auto-complete" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tab-for-auto-complete" class="callout-inner">
<h3 class="callout-title">Tab for Auto-complete<a class="anchor" aria-label="anchor" href="#tab-for-auto-complete"></a>
</h3>
<div class="callout-content">
<p>Pressing tab at any time within the shell will prompt it to attempt
to auto-complete the line based on the files or sub-directories in the
current directory. Where two or more files have the same characters, the
auto-complete will only fill up to the first point of difference, after
which we can add more characters, and try using tab again. We would
encourage using this method throughout today to see how it behaves (as
it saves loads of time and effort!).</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="reading-files">Reading files<a class="anchor" aria-label="anchor" href="#reading-files"></a>
</h3>
<p>If you are in <code>firstdir</code>, use <code>cd ..</code> to get
back to the <code>shell-lesson</code> directory.</p>
<p>Here there are copies of two public domain books downloaded from <a href="https://www.gutenberg.org/" class="external-link">Project Gutenberg</a> along with other
files we will cover later.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-lh</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>total 33M
-rw-rw-r-- 1 riley staff 383K Feb 22 2017  201403160_01_text.json
-rw-r--r-- 1 riley staff 3.6M Jan 31 2017  2014-01-31_JA-africa.tsv
-rw-r--r-- 1 riley staff 7.4M Jan 31 2017  2014-01-31_JA-america.tsv
-rw-rw-r-- 1 riley staff 125M Jun 10 2015  2014-01_JA.tsv
-rw-r--r-- 1 riley staff 1.4M Jan 31 2017  2014-02-02_JA-britain.tsv
-rw-r--r-- 1 riley staff 582K Feb  2 2017  33504-0.txt
-rw-r--r-- 1 riley staff 598K Jan 31 2017  829-0.txt
-rw-rw-r-- 1 riley staff  18K Feb 22 2017  diary.html
drwxr-xr-x 1 riley staff  64B Feb 22 2017  firstdir</code></pre>
</div>
<p>The files <code>829-0.txt</code> and <code>33504-0.txt</code> holds
the content of book #829 and #33504 on Project Gutenberg. But we’ve
forgot <em>which</em> books, so we try the <code>cat</code> command to
read the text of the first file:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> cat 829-0.txt</span></code></pre>
</div>
<p>The terminal window erupts and the whole book cascades by (it is
printed to your terminal), leaving us with a new prompt and the last few
lines of the book above this prompt.</p>
<p>Often we just want a quick glimpse of the first or the last part of a
file to get an idea about what the file is about. To let us do that, the
Unix shell provides us with the commands <code>head</code> and
<code>tail</code>.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> head 829-0.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The Project Gutenberg eBook, Gulliver's Travels, by Jonathan Swift


This eBook is for the use of anyone anywhere at no cost and with
almost no restrictions whatsoever.  You may copy it, give it away or
re-use it under the terms of the Project Gutenberg License included
with this eBook or online at www.gutenberg.org</code></pre>
</div>
<p>This provides a view of the first ten lines, whereas
<code>tail 829-0.txt</code> provides a perspective on the last ten
lines:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> tail 829-0.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Most people start at our Web site which has the main PG search facility:

    http://www.gutenberg.org

This Web site includes information about Project Gutenberg-tm,
including how to make donations to the Project Gutenberg Literary
Archive Foundation, how to help produce our new eBooks, and how to
subscribe to our email newsletter to hear about new eBooks.</code></pre>
</div>
<p>If ten lines is not enough (or too much), we would check
<code>man head</code> (or <code>head --help</code> when using Windows)
to see if there exists an option to specify the number of lines to get
(there is: <code>head -n 20</code> will print 20 lines).</p>
<p>Another way to navigate files is to view the contents one screen at a
time. Type <code>less 829-0.txt</code> to see the first screen,
<code>spacebar</code> to see the next screen and so on, then
<code>q</code> to quit (return to the command prompt).</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> less 829-0.txt</span></code></pre>
</div>
<p>Like many other shell commands, the commands <code>cat</code>,
<code>head</code>, <code>tail</code> and <code>less</code> can take any
number of arguments (they can work with any number of files). We will
see how we can get the first lines of several files at once. To save
some typing, we introduce a very useful trick first.</p>
<div id="re-using-commands" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="re-using-commands" class="callout-inner">
<h3 class="callout-title">Re-using commands<a class="anchor" aria-label="anchor" href="#re-using-commands"></a>
</h3>
<div class="callout-content">
<p>On a blank command prompt, press the up arrow key and notice that the
previous command you typed appears before your cursor. We can continue
pressing the up arrow to cycle through your previous commands. The down
arrow cycles back toward your most recent command. This is another
important labour-saving function and something we’ll use a lot.</p>
</div>
</div>
</div>
<p>Press the up arrow until you get to the <code>head 829-0.txt</code>
command. Add a space and then <code>33504-0.txt</code> (Remember your
friend Tab? Type <code>3</code> followed by <kbd>tab</kbd> to get
<code>33504-0.txt</code>), to produce the following command:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> head 829-0.txt 33504-0.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>==&gt; 829-0.txt &lt;==
The Project Gutenberg eBook, Gulliver's Travels, by Jonathan Swift


This eBook is for the use of anyone anywhere at no cost and with
almost no restrictions whatsoever.  You may copy it, give it away or
re-use it under the terms of the Project Gutenberg License included
with this eBook or online at www.gutenberg.org




==&gt; 33504-0.txt &lt;==
The Project Gutenberg EBook of Opticks, by Isaac Newton

This eBook is for the use of anyone anywhere at no cost and with
almost no restrictions whatsoever.  You may copy it, give it away or
re-use it under the terms of the Project Gutenberg License included
with this eBook or online at www.gutenberg.org


Title: Opticks
       or, a Treatise of the Reflections, Refractions, Inflections,</code></pre>
</div>
<p>All good so far, but if we had <em>lots</em> of books, it would be
tedious to enter all the filenames. Luckily the shell supports
wildcards! The <code>?</code> (matches exactly one character) and
<code>*</code> (matches zero or more characters) are probably familiar
from library search systems. We can use the <code>*</code> wildcard to
write the above <code>head</code> command in a more compact way:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> head <span class="pp">*</span>.txt</span></code></pre>
</div>
<div id="more-on-wildcards" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="more-on-wildcards" class="callout-inner">
<h3 class="callout-title">More on wildcards<a class="anchor" aria-label="anchor" href="#more-on-wildcards"></a>
</h3>
<div class="callout-content">
<p>Wildcards are a feature of the shell and will therefore work with
<em>any</em> command. The shell will expand wildcards to a list of files
and/or directories before the command is executed, and the command will
never see the wildcards. As an exception, if a wildcard expression does
not match any file, Bash will pass the expression as a parameter to the
command as it is. For example typing <code>ls *.pdf</code> results in an
error message that there is no file called *.pdf.</p>
</div>
</div>
</div>
<!-- Timing: Spent 75 minutes to get here -->
</div>
<div class="section level3">
<h3 id="moving-copying-and-deleting-files">Moving, copying and deleting files<a class="anchor" aria-label="anchor" href="#moving-copying-and-deleting-files"></a>
</h3>
<p>We may also want to change the file name to something more
descriptive. We can <strong>move</strong> it to a new name by using the
<code>mv</code> or move command, giving it the old name as the first
argument and the new name as the second argument:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> mv 829-0.txt gulliver.txt</span></code></pre>
</div>
<p>This is equivalent to the ‘rename file’ function.</p>
<p>Afterwards, when we perform a <code>ls</code> command, we will see
that it is now called <code>gulliver.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2014-01-31_JA-africa.tsv   2014-02-02_JA-britain.tsv  gulliver.txt
2014-01-31_JA-america.tsv  33504-0.txt
2014-01_JA.tsv</code></pre>
</div>
<div id="copying-a-file" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="copying-a-file" class="callout-inner">
<h3 class="callout-title">Copying a file<a class="anchor" aria-label="anchor" href="#copying-a-file"></a>
</h3>
<div class="callout-content">
<p>Instead of <em>moving</em> a file, you might want to <em>copy</em> a
file (make a duplicate), for instance to make a backup before modifying
a file. Just like the <code>mv</code> command, the <code>cp</code>
command takes two arguments: the old name and the new name. How would
you make a copy of the file <code>gulliver.txt</code> called
<code>gulliver-backup.txt</code>? Try it!</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Answer
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">cp</span> gulliver.txt gulliver-backup.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="renaming-a-directory" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="renaming-a-directory" class="callout-inner">
<h3 class="callout-title">Renaming a directory<a class="anchor" aria-label="anchor" href="#renaming-a-directory"></a>
</h3>
<div class="callout-content">
<p>Renaming a directory works in the same way as renaming a file. Try
using the <code>mv</code> command to rename the <code>firstdir</code>
directory to <code>backup</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Answer
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">mv</span> firstdir backup</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="moving-a-file-into-a-directory" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="moving-a-file-into-a-directory" class="callout-inner">
<h3 class="callout-title">Moving a file into a directory<a class="anchor" aria-label="anchor" href="#moving-a-file-into-a-directory"></a>
</h3>
<div class="callout-content">
<p>If the last argument you give to the <code>mv</code> command is a
directory, not a file, the file given in the first argument will be
moved to that directory. Try using the <code>mv</code> command to move
the file <code>gulliver-backup.txt</code> into the <code>backup</code>
folder.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Answer
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">mv</span> gulliver-backup.txt backup</span></code></pre>
</div>
<p>This would also work:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">mv</span> gulliver-backup.txt backup/gulliver-backup.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="the-wildcards-and-regular-expressions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="the-wildcards-and-regular-expressions" class="callout-inner">
<h3 class="callout-title">The wildcards and regular expressions<a class="anchor" aria-label="anchor" href="#the-wildcards-and-regular-expressions"></a>
</h3>
<div class="callout-content">
<p>The <code>?</code> wildcard matches one character. The <code>*</code>
wildcard matches zero or more characters. If you attended the lesson on
regular expressions, do you remember how you would express that as
regular expressions?</p>
<p>(Regular expressions are not a feature of the shell, but some
commands support them. We’ll get back to that.)</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Answer
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<ul>
<li>The <code>?</code> wildcard matches the regular expression
<code>.</code> (a dot)</li>
<li>The <code>*</code> wildcard matches the regular expression
<code>.*</code>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="using-history" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="using-history" class="callout-inner">
<h3 class="callout-title">Using <code>history</code><a class="anchor" aria-label="anchor" href="#using-history"></a>
</h3>
<div class="callout-content">
<p>Use the <code>history</code> command to see a list of all the
commands you’ve entered during the current session. You can also use
<kbd>Ctrl</kbd> + <kbd>r</kbd> to do a reverse lookup. Press
<kbd>Ctrl</kbd> + <kbd>r</kbd>, then start typing any part of the
command you’re looking for. The past command will autocomplete. Press
<code>enter</code> to run the command again, or press the arrow keys to
start editing the command. If multiple past commands contain the text
you input, you can <kbd>Ctrl</kbd> + <kbd>r</kbd> repeatedly to cycle
through them. If you can’t find what you’re looking for in the reverse
lookup, use <kbd>Ctrl</kbd> + <kbd>c</kbd> to return to the prompt. If
you want to save your history, maybe to extract some commands from which
to build a script later on, you can do that with
<code>history &gt; history.txt</code>. This will output all history to a
text file called <code>history.txt</code> that you can later edit. To
recall a command from history, enter <code>history</code>. Note the
command number, e.g. 2045. Recall the command by entering
<code>!2045</code>. This will execute the command.</p>
</div>
</div>
</div>
<div id="using-the-echo-command" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="using-the-echo-command" class="callout-inner">
<h3 class="callout-title">Using the <code>echo</code> command<a class="anchor" aria-label="anchor" href="#using-the-echo-command"></a>
</h3>
<div class="callout-content">
<p>The <code>echo</code> command simply prints out a text you specify.
Try it out: <code>echo 'Library Carpentry is awesome!'</code>.
Interesting, isn’t it?</p>
<p>You can also specify a variable. First type <code>NAME=</code>
followed by your name, and press enter. Then type
<code>echo "$NAME is a fantastic library carpentry student"</code> and
press enter. What happens?</p>
<p>You can combine both text and normal shell commands using
<code>echo</code>, for example the <code>pwd</code> command you have
learned earlier today. You do this by enclosing a shell command in
<code>$(</code> and <code>)</code>, for instance <code>$(pwd)</code>.
Now, try out the following:
<code>echo "Finally, it is nice and sunny on" $(date)</code>. Note that
the output of the <code>date</code> command is printed together with the
text you specified. You can try the same with some of the other commands
you have learned so far.</p>
<p><strong>Why do you think the echo command is actually quite important
in the shell environment?</strong></p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Answer
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<p>You may think there is not much value in such a basic command like
<code>echo</code>. However, from the moment you start writing automated
shell scripts, it becomes very useful. For instance, you often need to
output text to the screen, such as the current status of a script.</p>
<p>Moreover, you just used a shell variable for the first time, which
can be used to temporarily store information, that you can reuse later
on. It will give many opportunities from the moment you start writing
automated scripts.</p>
</div>
</div>
</div>
</div>
<p>Finally, onto deleting. We won’t use it now, but if you do want to
delete a file, for whatever reason, the command is <code>rm</code>, or
remove.</p>
<p>Using wildcards, we can even delete lots of files. And adding the
<code>-r</code> flag we can delete folders with all their content.</p>
<p><strong>Unlike deleting from within our graphical user interface,
there is <em>no</em> warning, <em>no</em> recycling bin from which you
can get the files back and no other undo options!</strong> For that
reason, please be very careful with <code>rm</code> and extremely
careful with <code>rm -r</code>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>The shell can be used to copy, move, and combine multiple files</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-04-loops"><p>Content from <a href="04-loops.html">Automating the tedious with loops</a></p>
<hr>
<p>Last updated on 2024-02-23 |

        <a href="https://github.com/librarycarpentry/lc-shell/edit/main/episodes/04-loops.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a loop?</li>
<li>How can a loop be used to repeat a task?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe how loops can be used to repeat tasks</li>
<li>Implement a loop to rename several files</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="writing-a-loop">Writing a Loop<a class="anchor" aria-label="anchor" href="#writing-a-loop"></a>
<a class="anchor" aria-label="anchor" href="#writing-a-loop"></a>
</h2>
<hr class="half-width">
<p><strong>Loops</strong> are key to productivity improvements through
automation as they allow us to execute commands repetitively. Similar to
wildcards and tab completion, using loops also reduces the amount of
typing (and typing mistakes). Suppose we have several hundred document
files named <code>project_1825.txt</code>,
<code>project_1863.txt</code>, <code>XML_project.txt</code> and so on.
We would like to change these files, but also save a version of the
original files, naming the copies <code>backup_project_1825.txt</code>
and so on.</p>
<p>We can use a <strong>loop</strong> to do that. Here’s a simple
example that creates a backup copy of four text files in turn.</p>
<p>Let’s first create those files:</p>
<pre><code>$ touch a.txt b.txt c.txt d.txt</code></pre>
<p>This will create four empty files with those names.</p>
<p>Now we will use a loop to create a backup version of those files.
First let’s look at the general form of a loop:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="cf">for</span> thing <span class="kw">in</span> list_of_things</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>    <span class="ex">operation_using</span> <span class="va">$thing</span>    <span class="co"># Indentation within the loop is not required, but aids legibility</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>We can apply this to our example like this:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">?</span>.txt</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="op">&gt;</span>    echo <span class="st">"</span><span class="va">$filename</span><span class="st">"</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="op">&gt;</span>    cp <span class="st">"</span><span class="va">$filename</span><span class="st">"</span> backup_<span class="st">"</span><span class="va">$filename</span><span class="st">"</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">a.txt</span></span>
<span><span class="va">b.txt</span></span>
<span><span class="va">c.txt</span></span>
<span><span class="va">d.txt</span></span></code></pre>
</div>
<p>When the shell sees the keyword <code>for</code>, it knows to repeat
a command (or group of commands) once for each thing <code>in</code> a
list. For each iteration, the name of each thing is sequentially
assigned to the <strong>loop variable</strong> and the commands inside
the loop are executed before moving on to the next thing in the list.
Inside the loop, we call for the variable’s value by putting
<code>$</code> in front of it. The <code>$</code> tells the shell
interpreter to treat the <strong>variable</strong> as a variable name
and substitute its value in its place, rather than treat it as text or
an external command.</p>
<div id="double-quoting-variable-substitutions" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="double-quoting-variable-substitutions" class="callout-inner">
<h3 class="callout-title">Double-quoting variable substitutions<a class="anchor" aria-label="anchor" href="#double-quoting-variable-substitutions"></a>
</h3>
<div class="callout-content">
<p>Because real-world filenames often contain white-spaces, we wrap
<code>$filename</code> in double quotes (<code>"</code>). If we didn’t,
the shell would treat the white-space within a filename as a separator
between two different filenames, which usually results in errors.
Therefore, it’s best and generally safer to use <code>"$..."</code>
unless you are absolutely sure that no elements with white-space can
ever enter your loop variable (such as in <a href="05-counting-mining.html">episode 5</a>).</p>
</div>
</div>
</div>
<p>In this example, the list is four filenames: ‘a.txt’, ‘b.txt’,
‘c.txt’, and ‘d.txt’. Each time the loop iterates, it will assign a file
name to the variable <code>filename</code> and run the <code>cp</code>
command. The first time through the loop, <code>$filename</code> is
<code>a.txt</code>. The interpreter prints the filename to the screen
and then runs the command <code>cp</code> on <code>a.txt</code>,
(because we asked it to echo each filename as it works its way through
the loop). For the second iteration, <code>$filename</code> becomes
<code>b.txt</code>. This time, the shell prints the filename
<code>b.txt</code> to the screen, then runs <code>cp</code> on
<code>b.txt</code>. The loop performs the same operations for
<code>c.txt</code> and then for <code>d.txt</code> and then, since the
list only included these four items, the shell exits the
<code>for</code> loop at that point.</p>
<div id="follow-the-prompt" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="follow-the-prompt" class="callout-inner">
<h3 class="callout-title">Follow the Prompt<a class="anchor" aria-label="anchor" href="#follow-the-prompt"></a>
</h3>
<div class="callout-content">
<p>The shell prompt changes from <code>$</code> to <code>&gt;</code> and
back again as we were typing in our loop. The second prompt,
<code>&gt;</code>, is different to remind us that we haven’t finished
typing a complete command yet. A semicolon, <code>;</code>, can be used
to separate two commands written on a single line.</p>
</div>
</div>
</div>
<div id="same-symbols-different-meanings" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="same-symbols-different-meanings" class="callout-inner">
<h3 class="callout-title">Same Symbols, Different Meanings<a class="anchor" aria-label="anchor" href="#same-symbols-different-meanings"></a>
</h3>
<div class="callout-content">
<p>Here we see <code>&gt;</code> being used as a shell prompt, but
<code>&gt;</code> can also be used to redirect output from a command
(i.e. send it somewhere else, such as to a file, instead of displaying
the output in the terminal) — we’ll use redirection in <a href="05-counting-mining.html">episode 5</a>. Similarly, <code>$</code>
is used as a shell prompt, but, as we saw earlier, it is also used to
ask the shell to get the value of a variable.</p>
<p>If the <em>shell</em> prints <code>&gt;</code> or <code>$</code> then
it expects you to type something, and the symbol is a prompt.</p>
<p>If <em>you</em> type <code>&gt;</code> in the shell, it is an
instruction from you to the shell to redirect output.</p>
<p>If <em>you</em> type <code>$</code> in the shell, it is an
instruction from you to the shell to get the value of a variable.</p>
</div>
</div>
</div>
<p>We have called the variable in this loop <code>filename</code> in
order to make its purpose clearer to human readers. The shell itself
doesn’t care what the variable is called.</p>
<div id="for-loop-exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="for-loop-exercise" class="callout-inner">
<h3 class="callout-title">For loop exercise<a class="anchor" aria-label="anchor" href="#for-loop-exercise"></a>
</h3>
<div class="callout-content">
<p>Complete the blanks in the for loop below to print the name, first
line, and last line of each text file in the current directory.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">___</span> file in <span class="pp">*</span>.txt</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">__</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>	<span class="bu">echo</span> <span class="st">"_file"</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>	<span class="fu">head</span> <span class="at">-n</span> 1 _______</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>	<span class="ex">____</span> __ _ _______</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="ex">____</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="cf">for</span> file <span class="kw">in</span> <span class="pp">*</span>.txt</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>	<span class="bu">echo</span> <span class="st">"</span><span class="va">$file</span><span class="st">"</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>	<span class="fu">head</span> <span class="at">-n</span> 1 <span class="st">"</span><span class="va">$file</span><span class="st">"</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>	<span class="fu">tail</span> <span class="at">-n</span> 1 <span class="st">"</span><span class="va">$file</span><span class="st">"</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>This is our first look at loops. We will run another loop in the <a href="05-counting-mining.html">Counting and Mining with the Shell</a>
episode.</p>
<figure><img src="fig/shell_script_for_loop_flow_chart.svg" alt="For Loop in Action" class="figure mx-auto d-block"></figure><div id="running-the-loop-from-a-bash-script" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="running-the-loop-from-a-bash-script" class="callout-inner">
<h3 class="callout-title">Running the loop from a Bash script<a class="anchor" aria-label="anchor" href="#running-the-loop-from-a-bash-script"></a>
</h3>
<div class="callout-content">
<p>Alternatively, rather than running the loop above on the command
line, you can save it in a script file and run it from the command line
without having to rewrite the loop again. This is what is called a Bash
script which is a plain text file that contains a series of commands
like the loop you created above. In the example script below, the first
line of the file contains what is called a Shebang (<code>#!</code>)
followed by the path to the interpreter (or program) that will run the
rest of the lines in the file (<code>/bin/bash</code>). The second line
demonstrates how comments are made in scripts. This provides you with
more information about what the script does. The remaining lines contain
the loop you created above. You can create this file in the same
directory you’ve been using for the lesson and by using the text editor
of your choice (e.g. nano) but when you save the file, make sure it has
the extension <strong>.sh</strong>
(e.g. <code>my_first_bash_script.sh</code>). When you’ve done this, you
can run the Bash script by typing the command bash and the file name via
the command line (e.g. <code>bash my_first_bash_script.sh</code>).</p>
<pre><code>#!/bin/bash
# This script loops through .txt files, returns the file name, first line, and last line of the file
for file in *.txt
do
	echo $file
	head -n 1 $file
	tail -n 1 $file
done</code></pre>
<p>Download/copy <a href="files/my_first_bash_script.sh">my_first_bash_script.sh</a>. For
more on Bash scripts, see <a href="https://ryanstutorials.net/bash-scripting-tutorial/" class="external-link">Bash
Scripting Tutorial - Ryans Tutorials</a>.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Looping is the foundation for working smarter with the command
line</li>
<li>Loops help us to do the same (or similar) things to a bunch of
items</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-05-counting-mining"><p>Content from <a href="05-counting-mining.html">Counting and mining with the shell</a></p>
<hr>
<p>Last updated on 2024-05-07 |

        <a href="https://github.com/librarycarpentry/lc-shell/edit/main/episodes/05-counting-mining.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I count data?</li>
<li>How can I find data within files?</li>
<li>How can I combine existing commands to do new things?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Demonstrate counting lines, words, and characters with the shell
command wc and appropriate flags</li>
<li>Use strings to mine files and extract matched lines with the
shell</li>
<li>Create complex single line commands by combining shell commands and
regular expressions to mine files</li>
<li>Redirect a command’s output to a file.</li>
<li>Process a file instead of keyboard input using redirection.</li>
<li>Construct command pipelines with two or more stages.</li>
<li>Explain Unix’s ‘small pieces, loosely joined’ philosophy.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="counting-and-mining-data">Counting and mining data<a class="anchor" aria-label="anchor" href="#counting-and-mining-data"></a>
<a class="anchor" aria-label="anchor" href="#counting-and-mining-data"></a>
</h2>
<hr class="half-width">
<p>Now that you know how to navigate the shell, we will move onto
learning how to count and mine data using a few of the standard shell
commands. While these commands are unlikely to revolutionise your work
by themselves, they’re very versatile and will add to your foundation
for working in the shell and for learning to code. The commands also
replicate the sorts of uses library users might make of library
data.</p>
</section><section><h2 class="section-heading" id="counting-and-sorting">Counting and sorting<a class="anchor" aria-label="anchor" href="#counting-and-sorting"></a>
<a class="anchor" aria-label="anchor" href="#counting-and-sorting"></a>
</h2>
<hr class="half-width">
<p>We will begin by counting the contents of files using the Unix shell.
We can use the Unix shell to quickly generate counts from across files,
something that is tricky to achieve using the graphical user interfaces
of standard office suites.</p>
<p>Let’s start by navigating to the directory that contains our data
using the <code>cd</code> command:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd shell-lesson</span></code></pre>
</div>
<p>Remember, if at any time you are not sure where you are in your
directory structure, use the <code>pwd</code> command to find out:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/riley/Desktop/shell-lesson</code></pre>
</div>
<p>And let’s check what files are in the directory and how large they
are with <code>ls -lhS</code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-lhS</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>total 139M
-rw-rw-r-- 1 riley staff 126M Jun 10  2015 2014-01_JA.tsv
-rw-r--r-- 1 riley staff 7.4M Jan 31 18:47 2014-01-31_JA-america.tsv
-rw-r--r-- 1 riley staff 3.6M Jan 31 18:47 2014-01-31_JA-africa.tsv
-rw-r--r-- 1 riley staff 1.4M Jan 31 18:47 2014-02-02_JA-britain.tsv
-rw-r--r-- 1 riley staff 598K Jan 31 18:47 gulliver.txt
-rw-r--r-- 1 riley staff 583K Feb  1 22:53 33504-0.txt
drwxr-xr-x 2 riley staff   68 Feb  2 00:58 backup</code></pre>
</div>
<p>In this episode we’ll focus on the dataset
<code>2014-01_JA.tsv</code>, that contains journal article metadata, and
the three <code>.tsv</code> files derived from the original dataset.
Each of these three <code>.tsv</code> files includes all data where a
keyword such as <code>africa</code> or <code>america</code> appears in
the ‘Title’ field of <code>2014-01_JA.tsv</code>.</p>
<div id="csv-and-tsv-files" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="csv-and-tsv-files" class="callout-inner">
<h3 class="callout-title">CSV and TSV Files<a class="anchor" aria-label="anchor" href="#csv-and-tsv-files"></a>
</h3>
<div class="callout-content">
<p>CSV (Comma-separated values) is a common plain text format for
storing tabular data, where each record occupies one line and the values
are separated by commas. TSV (Tab-separated values) is the same except
that values are separated by tabs rather than commas. Confusingly, CSV
is sometimes used to refer to both CSV, TSV and variations of them. The
simplicity of the formats make them great for exchange and archival.
They are not bound to a specific program (unlike Excel files, say, there
is no <code>CSV</code> program, just lots and lots of programs that
support the format, including Excel by the way.), and you wouldn’t have
any problems opening a 40 year old file today if you came across
one.</p>
</div>
</div>
</div>
<!-- hm, reminds me of MARC -->
<p>First, let’s have a look at the largest data file, using the tools we
learned in <a href="03-working-with-files-and-folders.html">Reading
files</a>:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> cat 2014-01_JA.tsv</span></code></pre>
</div>
<p>Like <code>829-0.txt</code> before, the whole dataset cascades by and
can’t really make any sense of that amount of text. To cancel this
on-going con<code>cat</code>enation, or indeed any process in the Unix
shell, press <kbd>Ctrl</kbd>+<kbd>C</kbd>.</p>
<p>In most data files a quick glimpse of the first few lines already
tells us a lot about the structure of the dataset, for example the
table/column headers:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 3 2014-01_JA.tsv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>File    Creator    Issue    Volume    Journal    ISSN    ID    Citation    Title    Place    Labe    Language    Publisher    Date
History_1a-rdf.tsv  Doolittle, W. E.  1 59  KIVA -ARIZONA-  0023-1940 (Uk)RN001571862 KIVA -ARIZONA- 59(1), 7-26. (1993)  A Method for Distinguishing between Prehistoric and Recent Water and Soil Control Features  xxu eng ARIZONA ARCHAEOLOGICAL AND HISTORICAL SOCIETY 1993
History_1a-rdf.tsv  Nelson, M. C. 1 59  KIVA -ARIZONA-  0023-1940 (Uk)RN001571874 KIVA -ARIZONA- 59(1), 27-48. (1993) Classic Mimbres Land Use in the Eastern Mimbres Region, Southwestern New Mexico xxu eng ARIZONA ARCHAEOLOGICAL AND HISTORICAL SOCIETY 1993
</code></pre>
</div>
<p>In the header, we can see the common metadata fields of academic
papers: <code>Creator</code>, <code>Issue</code>, <code>Citation</code>,
etc.</p>
<p>Next, let’s learn about a basic data analysis tool: <code>wc</code>
is the “word count” command: it counts the number of lines, words, and
bytes. Since we love the wildcard operator, let’s run the command
<code>wc *.tsv</code> to get counts for all the <code>.tsv</code> files
in the current directory (it takes a little time to complete):</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="pp">*</span>.tsv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    13712    511261   3773660 2014-01-31_JA-africa.tsv
    27392   1049601   7731914 2014-01-31_JA-america.tsv
   507732  17606310 131122144 2014-01_JA.tsv
     5375    196999   1453418 2014-02-02_JA-britain.tsv
   554211  19364171 144081136 total</code></pre>
</div>
<p>The first three columns contains the number of lines, words and
bytes.</p>
<p>If we only have a handful of files to compare, it might be faster or
more convenient to check with Microsoft Excel, OpenRefine or your
favourite text editor, but when we have tens, hundreds or thousands of
documents, the Unix shell has a clear speed advantage. The real power of
the shell comes from being able to combine commands and automate tasks,
though. We will touch upon this slightly.</p>
<p>For now, we’ll see how we can build a simple pipeline to find the
shortest file in terms of number of lines. We start by adding the
<code>-l</code> flag to get only the number of lines, not the number of
words and bytes:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.tsv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    13712 2014-01-31_JA-africa.tsv
    27392 2014-01-31_JA-america.tsv
   507732 2014-01_JA.tsv
     5375 2014-02-02_JA-britain.tsv
   554211 total</code></pre>
</div>
<p>The <code>wc</code> command itself doesn’t have a flag to sort the
output, but as we’ll see, we can combine three different shell commands
to get what we want.</p>
<p>First, we have the <code>wc -l *.tsv</code> command. We will save the
output from this command in a new file. To do that, we <em>redirect</em>
the output from the command to a file using the ‘greater than’ sign
(&gt;), like so:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.tsv <span class="op">&gt;</span> lengths.txt</span></code></pre>
</div>
<p>There’s no output now since the output went into the file
<code>lengths.txt</code>, but we can check that the output indeed ended
up in the file using <code>cat</code> or <code>less</code> (or Notepad
or any text editor).</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> cat lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    13712 2014-01-31_JA-africa.tsv
    27392 2014-01-31_JA-america.tsv
   507732 2014-01_JA.tsv
     5375 2014-02-02_JA-britain.tsv
   554211 total</code></pre>
</div>
<p>Next, there is the <code>sort</code> command. We’ll use the
<code>-n</code> flag to specify that we want numerical sorting, not
lexical sorting, we output the results into yet another file, and we use
<code>cat</code> to check the results:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt <span class="op">&gt;</span> sorted-lengths.txt</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="ex">$</span> cat sorted-lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     5375 2014-02-02_JA-britain.tsv
    13712 2014-01-31_JA-africa.tsv
    27392 2014-01-31_JA-america.tsv
   507732 2014-01_JA.tsv
   554211 total</code></pre>
</div>
<p>Finally we have our old friend <code>head</code>, that we can use to
get the first line of the <code>sorted-lengths.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 1 sorted-lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     5375 2014-02-02_JA-britain.tsv</code></pre>
</div>
<p>But we’re really just interested in the end result, not the
intermediate results now stored in <code>lengths.txt</code> and
<code>sorted-lengths.txt</code>. What if we could send the results from
the first command (<code>wc -l *.tsv</code>) directly to the next
command (<code>sort -n</code>) and then the output from that command to
<code>head -n 1</code>? Luckily we can, using a concept called pipes. On
the command line, you make a pipe with the vertical bar character
<code>|</code>. Let’s try with one pipe first:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.tsv <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     5375 2014-02-02_JA-britain.tsv
    13712 2014-01-31_JA-africa.tsv
    27392 2014-01-31_JA-america.tsv
   507732 2014-01_JA.tsv
   554211 total</code></pre>
</div>
<p>Notice that this is exactly the same output that ended up in our
<code>sorted-lengths.txt</code> earlier. Let’s add another pipe:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.tsv <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     5375 2014-02-02_JA-britain.tsv</code></pre>
</div>
<p>It can take some time to fully grasp pipes and use them efficiently,
but it’s a very powerful concept that you will find not only in the
shell, but also in most programming languages.</p>
<figure><img src="fig/redirects-and-pipes.png" alt="Redirects and Pipes" class="figure mx-auto d-block"></figure><div id="pipes-and-filters" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="pipes-and-filters" class="callout-inner">
<h3 class="callout-title">Pipes and Filters<a class="anchor" aria-label="anchor" href="#pipes-and-filters"></a>
</h3>
<div class="callout-content">
<p>This simple idea is why Unix has been so successful. Instead of
creating enormous programs that try to do many different things, Unix
programmers focus on creating lots of simple tools that each do one job
well, and that work well with each other. This programming model is
called “pipes and filters”. We’ve already seen pipes; a filter is a
program like <code>wc</code> or <code>sort</code> that transforms a
stream of input into a stream of output. Almost all of the standard Unix
tools can work this way: unless told to do otherwise, they read from
standard input, do something with what they’ve read, and write to
standard output.</p>
<p>The key is that any program that reads lines of text from standard
input and writes lines of text to standard output can be combined with
every other program that behaves this way as well. You can and should
write your programs this way so that you and other people can put those
programs into pipes to multiply their power.</p>
</div>
</div>
</div>
<!-- Copied from https://swcarpentry.github.io/shell-novice/04-pipefilter/ -->
<div id="adding-another-pipe" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="adding-another-pipe" class="callout-inner">
<h3 class="callout-title">Adding another pipe<a class="anchor" aria-label="anchor" href="#adding-another-pipe"></a>
</h3>
<div class="callout-content">
<p>We have our <code>wc -l *.tsv | sort -n | head -n 1</code> pipeline.
What would happen if you piped this into <code>cat</code>? Try it!</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The <code>cat</code> command outputs whatever it gets as input, so
you get exactly the same output from</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.tsv <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<p>and</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.tsv <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1 <span class="kw">|</span> <span class="fu">cat</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="count-the-number-of-words-sort-and-print-faded-example" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="count-the-number-of-words-sort-and-print-faded-example" class="callout-inner">
<h3 class="callout-title">Count the number of words, sort and print (faded example)<a class="anchor" aria-label="anchor" href="#count-the-number-of-words-sort-and-print-faded-example"></a>
</h3>
<div class="callout-content">
<p>To count the total lines in every <code>tsv</code> file, sort the
results and then print the first line of the file we use the
following:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> <span class="pp">*</span>.tsv <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<p>Now let’s change the scenario. We want to know the 10 files that
contain <em>the most</em> words. Check the manual for the
<code>wc</code> command (either using <code>man wc</code> or
<code>wc --help</code>) to see if you can find out what flag to use to
print out the number of words (but not the number of lines and bytes).
Fill in the blanks below to count the words for each file, put them into
order, and then make an output of the 10 files with the most words
(Hint: The sort command sorts in ascending order by default).</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">wc</span> __ <span class="pp">*</span>.tsv <span class="kw">|</span> <span class="fu">sort</span> __ <span class="kw">|</span> <span class="ex">____</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Here we use the <code>wc</code> command with the <code>-w</code>
(word) flag on all <code>tsv</code> files, <code>sort</code> them and
then output the last 11 lines (10 files and the total) using the
<code>tail</code> command.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-w</span> <span class="pp">*</span>.tsv <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 11</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="counting-number-of-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="counting-number-of-files" class="callout-inner">
<h3 class="callout-title">Counting number of files<a class="anchor" aria-label="anchor" href="#counting-number-of-files"></a>
</h3>
<div class="callout-content">
<p>Let’s make a different pipeline. You want to find out how many files
and directories there are in the current directory. Try to see if you
can pipe the output from <code>ls</code> into <code>wc</code> to find
the answer.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="writing-to-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="writing-to-files" class="callout-inner">
<h3 class="callout-title">Writing to files<a class="anchor" aria-label="anchor" href="#writing-to-files"></a>
</h3>
<div class="callout-content">
<p>The <code>date</code> command outputs the current date and time. Can
you write the current date and time to a new file called
<code>logfile.txt</code>? Then check the contents of the file.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> date <span class="op">&gt;</span> logfile.txt</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="ex">$</span> cat logfile.txt</span></code></pre>
</div>
<p>To check the contents, you could also use <code>less</code> or many
other commands.</p>
<p>Beware that <code>&gt;</code> will happily overwrite an existing file
without warning you, so please be careful.</p>
</div>
</div>
</div>
</div>
<div id="appending-to-a-file" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="appending-to-a-file" class="callout-inner">
<h3 class="callout-title">Appending to a file<a class="anchor" aria-label="anchor" href="#appending-to-a-file"></a>
</h3>
<div class="callout-content">
<p>While <code>&gt;</code> writes to a file, <code>&gt;&gt;</code>
appends something to a file. Try to append the current date and time to
the file <code>logfile.txt</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">$</span> date <span class="op">&gt;&gt;</span> logfile.txt</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="ex">$</span> cat logfile.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="counting-the-number-of-words" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="counting-the-number-of-words" class="callout-inner">
<h3 class="callout-title">Counting the number of words<a class="anchor" aria-label="anchor" href="#counting-the-number-of-words"></a>
</h3>
<div class="callout-content">
<p>We learned about the -w flag above, so now try using it with the
<code>.tsv</code> files.</p>
<p>If you have time, you can also try to sort the results by piping it
to <code>sort</code>. And/or explore the other flags of
<code>wc</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>From <code>man wc</code>, you will see that there is a
<code>-w</code> flag to print the number of words:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     -w      The number of words in each input file is written to the standard
             output.</code></pre>
</div>
<p>So to print the word counts of the <code>.tsv</code> files:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-w</span> <span class="pp">*</span>.tsv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  511261 2014-01-31_JA-africa.tsv
 1049601 2014-01-31_JA-america.tsv
17606310 2014-01_JA.tsv
  196999 2014-02-02_JA-britain.tsv
19364171 total</code></pre>
</div>
<p>And to sort the lines numerically:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-w</span> <span class="pp">*</span>.tsv <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  196999 2014-02-02_JA-britain.tsv
  511261 2014-01-31_JA-africa.tsv
 1049601 2014-01-31_JA-america.tsv
17606310 2014-01_JA.tsv
19364171 total</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="mining-or-searching">Mining or searching<a class="anchor" aria-label="anchor" href="#mining-or-searching"></a>
<a class="anchor" aria-label="anchor" href="#mining-or-searching"></a>
</h2>
<hr class="half-width">
<p>Searching for something in one or more files is something we’ll often
need to do, so let’s introduce a command for doing that:
<code>grep</code> (short for <strong>global regular expression
print</strong>). As the name suggests, it supports regular expressions
and is therefore only limited by your imagination, the shape of your
data, and - when working with thousands or millions of files - the
processing power at your disposal.</p>
<p>To begin using <code>grep</code>, first navigate to the
<code>shell-lesson</code> directory if not already there. Then create a
new directory “results”:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> mkdir results</span></code></pre>
</div>
<p>Now let’s try our first search:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> grep 1999 <span class="pp">*</span>.tsv</span></code></pre>
</div>
<p>Remember that the shell will expand <code>*.tsv</code> to a list of
all the <code>.tsv</code> files in the directory. <code>grep</code> will
then search these for instances of the string “1999” and print the
matching lines.</p>
<div id="strings" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="strings" class="callout-inner">
<h3 class="callout-title">Strings<a class="anchor" aria-label="anchor" href="#strings"></a>
</h3>
<div class="callout-content">
<p>A string is a sequence of characters, or “a piece of text”.</p>
</div>
</div>
</div>
<p>Press the up arrow once in order to cycle back to your most recent
action. Amend <code>grep 1999 *.tsv</code> to
<code>grep -c 1999 *.tsv</code> and press enter.</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-c</span> 1999 <span class="pp">*</span>.tsv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2014-01-31_JA-africa.tsv:804
2014-01-31_JA-america.tsv:1478
2014-01_JA.tsv:28767
2014-02-02_JA-britain.tsv:284</code></pre>
</div>
<p>The shell now prints the number of times the string 1999 appeared in
each file. If you look at the output from the previous command, this
tends to refer to the date field for each journal article.</p>
<p>We will try another search:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-c</span> revolution <span class="pp">*</span>.tsv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2014-01-31_JA-africa.tsv:20
2014-01-31_JA-america.tsv:34
2014-01_JA.tsv:867
2014-02-02_JA-britain.tsv:9</code></pre>
</div>
<p>We got back the counts of the instances of the string
<code>revolution</code> within the files. Now, amend the above command
to the below and observe how the output of each is different:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-ci</span> revolution <span class="pp">*</span>.tsv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2014-01-31_JA-africa.tsv:118
2014-01-31_JA-america.tsv:1018
2014-01_JA.tsv:9327
2014-02-02_JA-britain.tsv:122</code></pre>
</div>
<p>This repeats the query, but prints a case insensitive count
(including instances of both <code>revolution</code> and
<code>Revolution</code> and other variants). Note how the count has
increased nearly 30 fold for those journal article titles that contain
the keyword ‘america’. As before, cycling back and adding
<code>&gt; results/</code>, followed by a filename (ideally in .txt
format), will save the results to a data file.</p>
<p>So far we have counted strings in files and printed to the shell or
to file those counts. But the real power of <code>grep</code> comes in
that you can also use it to create subsets of tabulated data (or indeed
any data) from one or multiple files.</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-i</span> revolution <span class="pp">*</span>.tsv</span></code></pre>
</div>
<p>This script looks in the defined files and prints any lines
containing <code>revolution</code> (without regard to case) to the
shell. We let the shell add today’s date to the filename:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-i</span> revolution <span class="pp">*</span>.tsv <span class="op">&gt;</span> results/<span class="va">$(</span><span class="fu">date</span> <span class="st">"+%Y-%m-%d"</span><span class="va">)</span>_JAi-revolution.tsv</span></code></pre>
</div>
<p>This saves the subsetted data to a new file.</p>
<div id="alternative-date-commands" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="alternative-date-commands" class="callout-inner">
<h3 class="callout-title">Alternative date commands<a class="anchor" aria-label="anchor" href="#alternative-date-commands"></a>
</h3>
<div class="callout-content">
<p>This way of writing dates is so common that on most platforms you can
get the same result by typing <code>$(date -I)</code> instead of
<code>$(date "+%Y-%m-%d")</code>.</p>
</div>
</div>
</div>
<p>However, if we look at this file, it contains every instance of the
string ‘revolution’ including as a single word and as part of other
words such as ‘revolutionary’. This perhaps isn’t as useful as we
thought… Thankfully, the <code>-w</code> flag instructs
<code>grep</code> to look for whole words only, giving us greater
precision in our search.</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-iw</span> revolution <span class="pp">*</span>.tsv <span class="op">&gt;</span> results/<span class="va">$(</span><span class="fu">date</span> <span class="st">"+%Y-%m-%d"</span><span class="va">)</span>_JAiw-revolution.tsv</span></code></pre>
</div>
<p>This script looks in both of the defined files and exports any lines
containing the whole word <code>revolution</code> (without regard to
case) to the specified <code>.tsv</code> file.</p>
<p>We can show the difference between the files we created.</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> results/<span class="pp">*</span>.tsv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   10585 2016-07-19_JAi-revolution.tsv
    7779 2016-07-19_JAiw-revolution.tsv
   18364 total</code></pre>
</div>
<div id="automatically-adding-a-date-prefix" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="automatically-adding-a-date-prefix" class="callout-inner">
<h3 class="callout-title">Automatically adding a date prefix<a class="anchor" aria-label="anchor" href="#automatically-adding-a-date-prefix"></a>
</h3>
<div class="callout-content">
<p>Notice how we didn’t type today’s date ourselves, but let the
<code>date</code> command do that mindless task for us. Find out about
the <code>"+%Y-%m-%d"</code> option and alternative options we could
have used.</p>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Show me the solution </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<p>Using <code>date --help</code> (on Git Bash for Windows or Linux) or
<code>man date</code> (on macOS or Linux) will show you that the
<code>+</code> option introduces a date format, where <code>%Y</code>,
<code>%m</code> and <code>%d</code> are replaced by the year, month, and
day respectively. There are many other percent-codes you could use.</p>
<p>You might also see that <code>-I</code> is short for <a href="https://en.wikipedia.org/wiki/ISO_8601" class="external-link">--iso-8601</a>, which
essentially avoids the confusion between the European and American date
formats <code>DD.MM.YYYY</code> and <code>MM/DD/YYYY</code>.</p>
</div>
</div>
</div>
</div>
<p>Finally, we’ll use the <strong>regular expression syntax</strong>
covered earlier to search for similar words.</p>
<div id="basic-extended-and-perl-compatible-regular-expressions" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="basic-extended-and-perl-compatible-regular-expressions" class="callout-inner">
<h3 class="callout-title">Basic, extended, and PERL-compatible regular expressions<a class="anchor" aria-label="anchor" href="#basic-extended-and-perl-compatible-regular-expressions"></a>
</h3>
<div class="callout-content">
<p>There are, unfortunately, <a href="https://www.gnu.org/software/grep/manual/html_node/Regular-Expressions.html" class="external-link">different
ways of writing regular expressions</a>. Across its various versions,
<code>grep</code> supports “basic”, at least two types of “extended”,
and “PERL-compatible” regular expressions. This is a common cause of
confusion, since most tutorials, including ours, teach regular
expressions compatible with the PERL programming language, but
<code>grep</code> uses basic by default. Unless you want to remember the
details, make your life easy by always using the most advanced regular
expressions your version of <code>grep</code> supports (<code>-E</code>
flag on macOS X, <code>-P</code> on most other platforms) or when doing
something more complex than searching for a plain string.</p>
</div>
</div>
</div>
<p>The regular expression ‘fr[ae]nc[eh]’ will match “france”, “french”,
but also “frence” and “franch”. It’s generally a good idea to enclose
the expression in single quotation marks, since that ensures the shell
sends it directly to grep without any processing (such as trying to
expand the wildcard operator *).</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-iwE</span> <span class="st">'fr[ae]nc[eh]'</span> <span class="pp">*</span>.tsv</span></code></pre>
</div>
<p>The shell will print out each matching line.</p>
<p>We include the <code>-o</code> flag to print only the matching part
of the lines e.g. (handy for isolating/checking results):</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-iwEo</span> <span class="st">'fr[ae]nc[eh]'</span> <span class="pp">*</span>.tsv</span></code></pre>
</div>
<p>Pair up with your neighbor and work on these exercises:</p>
<div id="case-sensitive-search" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="case-sensitive-search" class="callout-inner">
<h3 class="callout-title">Case sensitive search<a class="anchor" aria-label="anchor" href="#case-sensitive-search"></a>
</h3>
<div class="callout-content">
<p>Search for all case sensitive instances of a whole word you choose in
all four derived <code>.tsv</code> files in this directory. Print your
results to the shell.</p>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8"> Show me the solution </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-w</span> hero <span class="pp">*</span>.tsv</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="case-sensitive-search-in-select-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="case-sensitive-search-in-select-files" class="callout-inner">
<h3 class="callout-title">Case sensitive search in select files<a class="anchor" aria-label="anchor" href="#case-sensitive-search-in-select-files"></a>
</h3>
<div class="callout-content">
<p>Search for all case sensitive instances of a word you choose in the
‘America’ and ‘Africa’ <code>.tsv</code> files in this directory. Print
your results to the shell.</p>
</div>
</div>
</div>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9"> Show me the solution </h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" aria-labelledby="headingSolution9" data-bs-parent="#accordionSolution9">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="ex">$</span> grep hero <span class="pp">*</span>a.tsv</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="count-words-case-sensitive" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="count-words-case-sensitive" class="callout-inner">
<h3 class="callout-title">Count words (case sensitive)<a class="anchor" aria-label="anchor" href="#count-words-case-sensitive"></a>
</h3>
<div class="callout-content">
<p>Count all case sensitive instances of a word you choose in the
‘America’ and ‘Africa’ <code>.tsv</code> files in this directory. Print
your results to the shell.</p>
</div>
</div>
</div>
<div id="accordionSolution10" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution10" aria-expanded="false" aria-controls="collapseSolution10">
  <h4 class="accordion-header" id="headingSolution10"> Show me the solution </h4>
</button>
<div id="collapseSolution10" class="accordion-collapse collapse" aria-labelledby="headingSolution10" data-bs-parent="#accordionSolution10">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-c</span> hero <span class="pp">*</span>a.tsv</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="count-words-case-insensitive" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="count-words-case-insensitive" class="callout-inner">
<h3 class="callout-title">Count words (case insensitive)<a class="anchor" aria-label="anchor" href="#count-words-case-insensitive"></a>
</h3>
<div class="callout-content">
<p>Count all case insensitive instances of that word in the ‘America’
and ‘Africa’ <code>.tsv</code> files in this directory. Print your
results to the shell.</p>
</div>
</div>
</div>
<div id="accordionSolution11" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution11" aria-expanded="false" aria-controls="collapseSolution11">
  <h4 class="accordion-header" id="headingSolution11"> Show me the solution </h4>
</button>
<div id="collapseSolution11" class="accordion-collapse collapse" aria-labelledby="headingSolution11" data-bs-parent="#accordionSolution11">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-ci</span> hero <span class="pp">*</span>a.tsv</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="case-insensitive-search-in-select-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="case-insensitive-search-in-select-files" class="callout-inner">
<h3 class="callout-title">Case insensitive search in select files<a class="anchor" aria-label="anchor" href="#case-insensitive-search-in-select-files"></a>
</h3>
<div class="callout-content">
<p>Search for all case insensitive instances of that word in the
‘America’ and ‘Africa’ <code>.tsv</code> files in this directory. Print
your results to a file <code>results/hero.tsv</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution12" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution12" aria-expanded="false" aria-controls="collapseSolution12">
  <h4 class="accordion-header" id="headingSolution12"> Show me the solution </h4>
</button>
<div id="collapseSolution12" class="accordion-collapse collapse" aria-labelledby="headingSolution12" data-bs-parent="#accordionSolution12">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-i</span> hero <span class="pp">*</span>a.tsv <span class="op">&gt;</span> results/hero.tsv</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="case-insensitive-search-in-select-files-whole-word" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="case-insensitive-search-in-select-files-whole-word" class="callout-inner">
<h3 class="callout-title">Case insensitive search in select files (whole word)<a class="anchor" aria-label="anchor" href="#case-insensitive-search-in-select-files-whole-word"></a>
</h3>
<div class="callout-content">
<p>Search for all case insensitive instances of that whole word in the
‘America’ and ‘Africa’ <code>.tsv</code> files in this directory. Print
your results to a file <code>results/hero-i.tsv</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution13" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution13" aria-expanded="false" aria-controls="collapseSolution13">
  <h4 class="accordion-header" id="headingSolution13"> Show me the solution </h4>
</button>
<div id="collapseSolution13" class="accordion-collapse collapse" aria-labelledby="headingSolution13" data-bs-parent="#accordionSolution13">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-iw</span> hero <span class="pp">*</span>a.tsv <span class="op">&gt;</span> results/hero-i.tsv</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="searching-with-regular-expressions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="searching-with-regular-expressions" class="callout-inner">
<h3 class="callout-title">Searching with regular expressions<a class="anchor" aria-label="anchor" href="#searching-with-regular-expressions"></a>
</h3>
<div class="callout-content">
<p>Use regular expressions to find all ISSN numbers (four digits
followed by hyphen followed by four digits) in
<code>2014-01_JA.tsv</code> and print the results to a file
<code>results/issns.tsv</code>. Note that you might have to use the
<code>-E</code> flag (or <code>-P</code> with some versions of
<code>grep</code>, e.g. with Git Bash on Windows).</p>
</div>
</div>
</div>
<div id="accordionSolution14" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution14" aria-expanded="false" aria-controls="collapseSolution14">
  <h4 class="accordion-header" id="headingSolution14"> Show me the solution </h4>
</button>
<div id="collapseSolution14" class="accordion-collapse collapse" aria-labelledby="headingSolution14" data-bs-parent="#accordionSolution14">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-Eo</span> <span class="st">'\d{4}-\d{4}'</span> 2014-01_JA.tsv <span class="op">&gt;</span> results/issns.tsv</span></code></pre>
</div>
<p>or</p>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-Po</span> <span class="st">'\d{4}-\d{4}'</span> 2014-01_JA.tsv <span class="op">&gt;</span> results/issns.tsv</span></code></pre>
</div>
<p>It is worth checking the file to make sure <code>grep</code> has
interpreted the pattern correctly. You could use the <code>less</code>
command for this.</p>
<p>The <code>-o</code> flag means that only the ISSN itself is printed
out, instead of the whole line.</p>
<p>If you came up with something more advanced, perhaps including word
boundaries, please share your result in the collaborative document and
give yourself a pat on the shoulder.</p>
</div>
</div>
</div>
</div>
<div id="finding-unique-values" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="finding-unique-values" class="callout-inner">
<h3 class="callout-title">Finding unique values<a class="anchor" aria-label="anchor" href="#finding-unique-values"></a>
</h3>
<div class="callout-content">
<p>If you pipe something to the <code>uniq</code> command, it will
filter out adjacent duplicate lines. In order for the ‘uniq’ command to
only return unique values though, it needs to be used with the ‘sort’
command. Try piping the output from the command in the last exercise to
<code>sort</code> and then piping these results to ‘uniq’ and then
<code>wc -l</code> to count the number of unique ISSN values.</p>
</div>
</div>
</div>
<div id="accordionSolution15" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution15" aria-expanded="false" aria-controls="collapseSolution15">
  <h4 class="accordion-header" id="headingSolution15"> Show me the solution </h4>
</button>
<div id="collapseSolution15" class="accordion-collapse collapse" aria-labelledby="headingSolution15" data-bs-parent="#accordionSolution15">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-Eo</span> <span class="st">'\d{4}-\d{4}'</span> 2014-01_JA.tsv <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span></code></pre>
</div>
<p>or</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-Po</span> <span class="st">'\d{4}-\d{4}'</span> 2014-01_JA.tsv <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="using-a-loop-to-count-words">Using a Loop to Count Words<a class="anchor" aria-label="anchor" href="#using-a-loop-to-count-words"></a>
</h3>
<p>We will now use a loop to automate the counting of certain words
within a document. For this, we will be using the <em><a href="https://www.gutenberg.org/cache/epub/514/pg514.txt" class="external-link">Little
Women</a></em> e-book from <a href="https://www.gutenberg.org/" class="external-link">Project
Gutenberg</a>. The file is inside the <code>shell-lesson</code> folder
and named <code>pg514.txt</code>. Let’s rename the file to
<code>littlewomen.txt</code>.</p>
<pre><code>$ mv pg514.txt littlewomen.txt</code></pre>
<p>This renames the file to something easier to remember.</p>
<p>Now let’s create our loop. In the loop, we will ask the computer to
go through the text, looking for each girl’s name, and count the number
of times it appears. The results will print to the screen.</p>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a><span class="ex">$</span> for name in <span class="st">"Jo"</span> <span class="st">"Meg"</span> <span class="st">"Beth"</span> <span class="st">"Amy"</span></span>
<span id="cb63-2"><a href="#cb63-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb63-3"><a href="#cb63-3" tabindex="-1"></a><span class="op">&gt;</span>    echo <span class="st">"</span><span class="va">$name</span><span class="st">"</span></span>
<span id="cb63-4"><a href="#cb63-4" tabindex="-1"></a><span class="op">&gt;</span>    grep <span class="ex">-wo</span> <span class="st">"</span><span class="va">$name</span><span class="st">"</span> littlewomen.txt <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span>
<span id="cb63-5"><a href="#cb63-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">Jo</span></span>
<span><span class="fl">1355</span></span>
<span><span class="va">Meg</span></span>
<span><span class="fl">683</span></span>
<span><span class="va">Beth</span></span>
<span><span class="fl">459</span></span>
<span><span class="va">Amy</span></span>
<span><span class="fl">645</span></span></code></pre>
</div>
<p>What is happening in the loop?</p>
<ul>
<li>
<code>echo "$name"</code> is printing the current value of
<code>$name</code>
</li>
<li>
<code>grep "$name" littlewomen.txt</code> finds each line that
contains the value stored in <code>$name</code>. The <code>-w</code>
flag finds only the whole word that is the value stored in
<code>$name</code> and the <code>-o</code> flag pulls this value out
from the line it is in to give you the actual words to count as lines in
themselves.</li>
<li>The output from the <code>grep</code> command is redirected with the
pipe, <code>|</code> (without the pipe and the rest of the line, the
output from <code>grep</code> would print directly to the screen)</li>
<li>
<code>wc -l</code> counts the number of <em>lines</em> (because we
used the <code>-l</code> flag) sent from <code>grep</code>. Because
<code>grep</code> only returned lines that contained the value stored in
<code>$name</code>, <code>wc -l</code> corresponds to the number of
occurrences of each girl’s name.</li>
</ul>
<div id="why-are-the-variables-double-quoted-here" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="why-are-the-variables-double-quoted-here" class="callout-inner">
<h3 class="callout-title">Why are the variables double-quoted here?<a class="anchor" aria-label="anchor" href="#why-are-the-variables-double-quoted-here"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: lower-alpha">
<li><p>In <a href="04-loops.html">episode 4</a> we learned to use
<code>"$..."</code> as a safeguard against white-space being
misinterpreted. Why <em>could</em> we omit the <code>"</code>-quotes in
the above example?</p></li>
<li><p>What happens if you add <code>"Louisa May Alcott"</code> to the
first line of the loop and remove the <code>"</code> from
<code>$name</code> in the loop’s code?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution16" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution16" aria-expanded="false" aria-controls="collapseSolution16">
  <h4 class="accordion-header" id="headingSolution16"> Solutions </h4>
</button>
<div id="collapseSolution16" class="accordion-collapse collapse" aria-labelledby="headingSolution16" data-bs-parent="#accordionSolution16">
<div class="accordion-body">
<ol style="list-style-type: lower-alpha">
<li><p>Because we are explicitly listing the names after
<code>in</code>, and those contain no white-space. However, for
consistency it’s better to use rather once too often than once too
rarely.</p></li>
<li><p>Without <code>"</code>-quoting <code>$name</code>, the last loop
will try to execute <code>grep Louisa May Alcott littlewomen.txt</code>.
<code>grep</code> interprets only the first word as the search pattern,
but <code>May</code> and <code>Alcott</code> as filenames. This produces
two errors and a possibly untrustworthy count:</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a><span class="ex">...</span></span>
<span id="cb65-2"><a href="#cb65-2" tabindex="-1"></a><span class="ex">Louisa</span> May Alcott</span>
<span id="cb65-3"><a href="#cb65-3" tabindex="-1"></a><span class="ex">grep:</span> May: No such file or directory</span>
<span id="cb65-4"><a href="#cb65-4" tabindex="-1"></a><span class="ex">grep:</span> Alcott: No such file or directory</span>
<span id="cb65-5"><a href="#cb65-5" tabindex="-1"></a><span class="ex">4</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="selecting-columns-from-our-article-dataset" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="selecting-columns-from-our-article-dataset" class="callout-inner">
<h3 class="callout-title">Selecting columns from our article dataset<a class="anchor" aria-label="anchor" href="#selecting-columns-from-our-article-dataset"></a>
</h3>
<div class="callout-content">
<p>When you receive data it will often contain more columns or variables
than you need for your work. If you want to select only the columns you
need for your analysis, you can use the <code>cut</code> command to do
so. <code>cut</code> is a tool for extracting sections from a file. For
instance, say we want to retain only the <code>Creator</code>,
<code>Volume</code>, <code>Journal</code>, and <code>Citation</code>
columns from our article data. With <code>cut</code> we’d:</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-f</span> 2,4,5,8 2014-01_JA.tsv <span class="kw">|</span> <span class="fu">head</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Creator	Volume	Journal	Citation
Doolittle, W. E.  59  KIVA -ARIZONA-  KIVA -ARIZONA- 59(1), 7-26. (1993)
Nelson, M. C.	59	KIVA -ARIZONA-	KIVA -ARIZONA- 59(1), 27-48. (1993)
Deegan, A. C.	59	KIVA -ARIZONA-	KIVA -ARIZONA- 59(1), 49-64. (1993)
Stone, T.	59	KIVA -ARIZONA-	KIVA -ARIZONA- 59(1), 65-82. (1993)
Adams, W. Y.	1	NORTHEAST AFRICAN STUDIES	NORTHEAST AFRICAN STUDIES 1(2/3), 7-18. (1994)
Beswick, S. F.	1	NORTHEAST AFRICAN STUDIES	NORTHEAST AFRICAN STUDIES 1(2/3), 19-48. (1994)
Cheeseboro, A. Q.	1	NORTHEAST AFRICAN STUDIES	NORTHEAST AFRICAN STUDIES 1(2/3), 49-74. (1994)
Duany, W.	1	NORTHEAST AFRICAN STUDIES	NORTHEAST AFRICAN STUDIES 1(2/3), 75-102. (1994)
Mohamed Ibrahim Khalil	1	NORTHEAST AFRICAN STUDIES	NORTHEAST AFRICAN STUDIES 1(2/3), 103-118. (1994)</code></pre>
</div>
<p>Above we used <code>cut</code> and the <code>-f</code> flag to
indicate which columns we want to retain. <code>cut</code> works on tab
delimited files by default. We can use the flag <code>-d</code> to
change this to a comma, or semicolon or another delimiter. If you are
unsure of your column position and the file has headers on the first
line, we can use <code>head -n 1 &lt;filename&gt;</code> to print those
out.</p>
<div class="section level3">
<h3 id="now-your-turn">Now your turn<a class="anchor" aria-label="anchor" href="#now-your-turn"></a>
</h3>
<p>Select the columns <code>Issue</code>, <code>Volume</code>,
<code>Language</code>, <code>Publisher</code> and direct the output into
a new file. You can name it something like
<code>2014-01_JA_ivlp.tsv</code>.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution17" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution17" aria-expanded="false" aria-controls="collapseSolution17">
  <h4 class="accordion-header" id="headingSolution17"> Show me the solution </h4>
</button>
<div id="collapseSolution17" class="accordion-collapse collapse" aria-labelledby="headingSolution17" data-bs-parent="#accordionSolution17">
<div class="accordion-body">
<p>First, let’s see where our desired columns are:</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> 1 2014-01_JA.tsv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>File	Creator	Issue	Volume	Journal	ISSN	ID	Citation	Title	Place Labe	Language	Publisher	Date</code></pre>
</div>
<p>Ok, now we know <code>Issue</code> is column 3, <code>Volume</code>
4, <code>Language</code> 11, and <code>Publisher</code> 12. We use these
positional column numbers to construct our <code>cut</code> command:</p>
<pre><code>cut -f 3,4,11,12 2014-01_JA.tsv &gt; 2014-01_JA_ivlp.tsv</code></pre>
<p>We can confirm this worked by running head on the file:</p>
<pre><code>head 2014-01_JA_ivlp.tsv</code></pre>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Issue	Volume	Language	Publisher
1	59	eng	ARIZONA ARCHAEOLOGICAL AND HISTORICAL SOCIETY
1	59	eng	ARIZONA ARCHAEOLOGICAL AND HISTORICAL SOCIETY
1	59	eng	ARIZONA ARCHAEOLOGICAL AND HISTORICAL SOCIETY
1	59	eng	ARIZONA ARCHAEOLOGICAL AND HISTORICAL SOCIETY</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>The shell can be used to count elements of documents</li>
<li>The shell can be used to search for patterns within files</li>
<li>Commands can be used to count and mine any number of files</li>
<li>Commands and flags can be combined to build complex queries specific
to your work</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-06-free-text"><p>Content from <a href="06-free-text.html">Working with free text</a></p>
<hr>
<p>Last updated on 2024-06-05 |

        <a href="https://github.com/librarycarpentry/lc-shell/edit/main/episodes/06-free-text.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do we work with complex files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use shell tools to clean and transform free text</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="working-with-free-text">Working with free text<a class="anchor" aria-label="anchor" href="#working-with-free-text"></a>
</h3>
<p>So far we have looked at how to use the Unix shell to manipulate,
count, and mine tabulated data. Some library data, especially digitised
documents, is much messier than tabular metadata. Nonetheless, many of
the same techniques can be applied to non-tabulated data such as free
text. We need to think carefully about what it is we are counting and
how we can get the best out of the Unix shell.</p>
<p>Thankfully there are plenty of folks out there doing this sort of
work and we can borrow what they do as an introduction to working with
these more complex files. So for this final exercise we’re going to leap
forward a little in terms of difficulty to a scenario where we won’t
learn about everything that is happening in detail or discuss at length
each command. We’re going to prepare and pull apart texts to demonstrate
some of the potential applications of the Unix shell. And where commands
we’ve learnt about are used, I’ve left some of the figuring out to do to
you - so please refer to your notes if you get stuck!</p>
<p>Before going any further, speak to the person next to you and choose
which type of text you’d like to work on together. You have three
options:</p>
<ul>
<li>
<a href="#option-1-hand-transcribed-text">Option 1</a>: An example
of hand transcribed text: <em>Gulliver’s Travels</em> (1735)</li>
<li>
<a href="#option-2-optical-character-recognised-text">Option 2</a>:
An example of text captured by an optical character recognition process:
<em>General Report on the Physiography of Maryland. A dissertation, etc.
(Reprinted from Report of Maryland State Weather Service.) [With maps
and illustrations.]</em> 1898 (Retrieved from <a href="https://doi.org/10.21250/db12" class="external-link">doi.org/10.21250/db12</a>)</li>
<li>
<a href="#option-3-a-webpage">Option 3</a>: An example of a webpage:
Piper’s World (a GeoCities page from 1999 saved at <a href="https://wayback.archive.org/web/20091020080943/http:/geocities.com/Heartland/Hills/7649/diary.html" class="external-link">archive.org</a>)</li>
</ul>
</div>
<section><h2 class="section-heading" id="option-1-hand-transcribed-text">Option 1: Hand transcribed text<a class="anchor" aria-label="anchor" href="#option-1-hand-transcribed-text"></a>
<a class="anchor" aria-label="anchor" href="#option-1-hand-transcribed-text"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="grabbing-a-text-cleaning-it-up">Grabbing a text, cleaning it up<a class="anchor" aria-label="anchor" href="#grabbing-a-text-cleaning-it-up"></a>
</h3>
<p>We’re going to work with the <code>gulliver.txt</code> file, which we
made in <a href="03-working-with-files-and-folders.html">Episode 3,
‘Working with files and directories’</a>. You should (still) be working
in the <code>shell-lesson</code> directory.</p>
<p>Let’s look at the file.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> less <span class="at">-N</span> gulliver.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      1 &lt;U+FEFF&gt;The Project Gutenberg eBook, Gulliver's Travels, by Jonatha
      1 n Swift
      2
      3
      4 This eBook is for the use of anyone anywhere at no cost and with
      5 almost no restrictions whatsoever.  You may copy it, give it away o
      5 r
      6 re-use it under the terms of the Project Gutenberg License included
      7 with this eBook or online at www.gutenberg.org
      8
      9
     10
     11
     12
     13 Title: Gulliver's Travels
     14        into several remote nations of the world
     15
     16
     17 Author: Jonathan Swift
     18
     19
     20
     21 Release Date: June 15, 2009  [eBook #829]
     22
     23 Language: English
     24
     25 Character set encoding: UTF-8
     26
     27
     28 ***START OF THE PROJECT GUTENBERG EBOOK GULLIVER'S TRAVELS***
     29
     30
     31 Transcribed from the 1892 George Bell and Sons edition by David Pri
     31 ce,
     32 email ccx074@pglaf.org
     33
     34
     35</code></pre>
</div>
<p>We’re going to start by using the <code>sed</code> command. The
command allows you to edit files directly.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> sed <span class="st">'9352,9714d'</span> gulliver.txt <span class="op">&gt;</span> gulliver-nofoot.txt</span></code></pre>
</div>
<p>The command <code>sed</code> in combination with the <code>d</code>
value will look at <code>gulliver.txt</code> and delete all values
between the rows specified. The <code>&gt;</code> action then prompts
the script to this edited text to the new file specified.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> sed <span class="st">'1,37d'</span> gulliver-nofoot.txt <span class="op">&gt;</span> gulliver-noheadfoot.txt</span></code></pre>
</div>
<p>This does the same as before, but for the header.</p>
<p>You now have a cleaner text. The next step is to prepare it even
further for rigorous analysis.</p>
<p>We now use the <code>tr</code> command, used for translating or
deleting characters. Type and run:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> tr <span class="at">-d</span> <span class="st">'[:punct:]\r'</span> <span class="op">&lt;</span> gulliver-noheadfoot.txt <span class="op">&gt;</span> gulliver-noheadfootpunct.txt</span></code></pre>
</div>
<p>This uses the translate command and a special syntax to remove all
punctuation (<code>[:punct:]</code>) and carriage returns
(<code>\r</code>). It also requires the use of both the output redirect
<code>&gt;</code> we have seen and the input redirect <code>&lt;</code>
we haven’t seen.</p>
<p>Finally regularise the text by removing all the uppercase
lettering.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> tr <span class="st">'[:upper:]'</span> <span class="st">'[:lower:]'</span> <span class="op">&lt;</span> gulliver-noheadfootpunct.txt <span class="op">&gt;</span> gulliver-clean.txt</span></code></pre>
</div>
<p>Open the <code>gulliver-clean.txt</code> in a text editor. Note how
the text has been transformed ready for analysis.</p>
</div>
<div class="section level3">
<h3 id="pulling-a-text-apart-counting-word-frequencies">Pulling a text apart, counting word frequencies<a class="anchor" aria-label="anchor" href="#pulling-a-text-apart-counting-word-frequencies"></a>
</h3>
<p>We are now ready to pull the text apart.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> tr <span class="st">' '</span> <span class="st">'\n'</span> <span class="op">&lt;</span> gulliver-clean.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="at">-c</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-nr</span> <span class="op">&gt;</span> gulliver-final.txt</span></code></pre>
</div>
<p>Here we’ve made extended use of the pipes we saw in <a href="05-counting-mining.html">Counting and mining with the shell</a>.
The first part of this script uses the translate command again, this
time to translate every blank space into <code>\n</code> which renders
as a new line. Every word in the file will at this stage have its own
line.</p>
<p>The second part uses the <code>sort</code> command to rearrange the
text from its original order into an alphabetical configuration.</p>
<p>The third part uses <code>uniq</code>, another new command, in
combination with the <code>-c</code> flag to remove duplicate lines and
to produce a word count of those duplicates.</p>
<p>The fourth and final part sorts the text again by the counts of
duplicates generated in step three.</p>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge"></a>
</h3>
<div class="callout-content">
<p>There are still some remaining punctuation marks in the text. They
are called ‘smart’ or ‘curly’ quotes. Can you remove them using
<code>sed</code>?</p>
<p>Hint: These quote marks are not among the 128 characters of the ASCII
standard, so in the file they are encoded using a different standard,
UTF-8. While this is no problem for <code>sed</code>, the window you are
typing into may not understand UTF-8. If so you will need to use a Bash
script; we encountered these at the end of episode 4, ‘Automating the
tedious with loops’.</p>
<p>As a reminder, use the text editor of your choice to write a file
that looks like this:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># This script removes quote marks from gulliver-clean.txt and saves the result as gulliver-noquotes.txt</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">replace</span> this line with your solution<span class="kw">)</span></span></code></pre>
</div>
<p>Save the file as <code>remove-quotes.sh</code> and run it from the
command line like this:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">bash</span> remove-quotes.sh</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co"># This script removes quote marks from gulliver-clean.txt and saves the result as gulliver-noquotes.txt</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-Ee</span> <span class="st">'s/[""‘'</span>]//g<span class="st">' gulliver-clean.txt &gt; gulliver-noquotes.txt</span></span></code></pre>
</div>
<p>If this doesn’t work for you, you might need to check whether your
text editor can save files using the UTF-8 encoding.</p>
</div>
</div>
</div>
</div>
<p>We have now taken the text apart and produced a count for each word
in it. This is data we can prod and poke and visualise, that can form
the basis of our investigations, and can compare with other texts
processed in the same way. And if we need to run a different set of
transformation for a different analysis, we can return to
<code>gulliver-clean.txt</code> to start that work.</p>
<p>And all this using a few commands on an otherwise unassuming but very
powerful command line.</p>
</div>
</section><section><h2 class="section-heading" id="option-2-optical-character-recognised-text">Option 2: Optical character recognised text<a class="anchor" aria-label="anchor" href="#option-2-optical-character-recognised-text"></a>
<a class="anchor" aria-label="anchor" href="#option-2-optical-character-recognised-text"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="grabbing-a-text-cleaning-it-up-1">Grabbing a text, cleaning it up<a class="anchor" aria-label="anchor" href="#grabbing-a-text-cleaning-it-up-1"></a>
</h3>
<p>We’re going to work with <code>201403160_01_text.json</code>.</p>
<p>Let’s look at the file.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> less <span class="at">-N</span> 201403160_01_text.json</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      1 [[1, ""], [2, ""], [3, ""], [4, ""], [5, ""], [6, ""], [7, "A GENERAL RE
      1 PORT ON THE PHYSIOGRAPHY OF MARYLAND A DISSERTATION PRESENTED TO THE PRE
      1 SIDENT AND FACULTY OF THE JOHNS HOPKINS UNIVERSITY FOR THE DEGREE OF DOC
      1 TOR OF PHILOSOPHY BY CLEVELAND ABBE, Jr. BALTIMORE, MD. MAY, 1898."], [8
      1 , ""], [9, ""], [10, "A MAP S H OW I N G THE PHYSIOGRAPHIC PROVINCES OF
      1 MARYLAND AND Their Subdivisions Scale 1 : 2,000.000. 32 Miles-1 Inch"],
      1 [11, "A GENERAL REPORT ON THE PHYSIOGRAPHY OF MARYLAND A DISSERTATION PR
      1 ESENTED TO THE PRESIDENT AND FACULTY OF THE JOHNS HOPKINS UNIVERSITY FOR
      1  THE DEGREE OF DOCTOR OF PHILOSOPHY BY CLEVELAND ABBE, Jr. BALTIMORE, MD
      1 . MAY, 1898."], [12, "PRINTED BY tL%t jfricbcnrtxifti Compang BALTIMORE,
      1  MD., U. S. A. REPRINTED FROM Report of Maryland State Weather Service,
      1 Vol. 1, 1899, pp. 41-216."], [13, "A GENERAL REPORT ON THE PHYSIOGRAPHY
      1 OF MARYLAND Physiographic Processes. INTRODUCTION. From the earliest tim
      1 es men have observed more or less closely the various phenomena which na
      1 ture presents, and have sought to find an explanation for them. Among th
      1 e most interesting of these phe nomena have been those which bear on the
      1  development of the sur face features of the earth or its topography. Im
      1 pressed by the size and grandeur of the mountains, their jagged crests a
      1 nd scarred sides, early students of geographical features were prone to
      1 ascribe their origin to great convulsions of the earth's crust, earthqua
      1 kes and vol canic eruptions. One generation after another comes and goes
      1 , yet the mountains continue to rear their heads to the same heights, th
      1 e rivers to run down the mountain sides in the same courses and follow t</code></pre>
</div>
<p>We’re going to start by using the <code>tr</code> command, used for
translating or deleting characters. Type and run:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> tr <span class="at">-d</span> <span class="st">'[:punct:]'</span> <span class="op">&lt;</span> 201403160_01_text.json <span class="op">&gt;</span> 201403160_01_text-nopunct.txt</span></code></pre>
</div>
<p>This uses the translate command and a special syntax to remove all
punctuation. It also requires the use of both the output redirect
<code>&gt;</code> we have seen and the input redirect <code>&lt;</code>
we haven’t seen.</p>
<p>Finally regularise the text by removing all the uppercase
lettering.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> tr <span class="st">'[:upper:]'</span> <span class="st">'[:lower:]'</span> <span class="op">&lt;</span> 201403160_01_text-nopunct.txt <span class="op">&gt;</span> 201403160_01_text-clean.txt</span></code></pre>
</div>
<p>Open the <code>201403160_01_text-clean.txt</code> in a text editor.
Note how the text has been transformed ready for analysis.</p>
</div>
<div class="section level3">
<h3 id="pulling-a-text-apart-counting-word-frequencies-1">Pulling a text apart, counting word frequencies<a class="anchor" aria-label="anchor" href="#pulling-a-text-apart-counting-word-frequencies-1"></a>
</h3>
<p>We are now ready to pull the text apart.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> tr <span class="st">' '</span> <span class="st">'\n'</span> <span class="op">&lt;</span> 201403160_01_text-clean.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="at">-c</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-nr</span> <span class="op">&gt;</span> 201403160_01_text-final.txt</span></code></pre>
</div>
<p>Here we’ve made extended use of the pipes we saw in <a href="05-counting-mining.html">Counting and mining with the shell</a>.
The first part of this script uses the translate command again, this
time to translate every blank space into <code>\n</code> which renders
as a new line. Every word in the file will at this stage have its own
line.</p>
<p>The second part uses the <code>sort</code> command to rearrange the
text from its original order into an alphabetical configuration.</p>
<p>The third part uses <code>uniq</code>, another new command, in
combination with the <code>-c</code> flag to remove duplicate lines and
to produce a word count of those duplicates.</p>
<p>The fourth and final part sorts the text again by the counts of
duplicates generated in step three.</p>
<p><strong>Note: your final output will have one problem - not all the
words counted are real words (see the words counted only 1 or 2 times).
To better understand what has happened, search online to find out more
about Optical Character Recognition of texts</strong></p>
<p>Either way we have now taken the text apart and produced a count for
each word in it. This is data we can prod and poke and visualise, that
can form the basis of our investigations, and can compare with other
texts processed in the same way. And if we need to run a different set
of transformation for a different analysis, we can return to
<code>201403160_01_text-clean.txt</code> to start that work.</p>
<p>And all this using a few commands on an otherwise unassuming but very
powerful command line.</p>
</div>
</section><section><h2 class="section-heading" id="option-3-a-webpage">Option 3: A webpage<a class="anchor" aria-label="anchor" href="#option-3-a-webpage"></a>
<a class="anchor" aria-label="anchor" href="#option-3-a-webpage"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="grabbing-a-text-cleaning-it-up-2">Grabbing a text, cleaning it up<a class="anchor" aria-label="anchor" href="#grabbing-a-text-cleaning-it-up-2"></a>
</h3>
<p>We’re going to work with <code>diary.html</code>.</p>
<p>Let’s look at the file.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> less <span class="at">-N</span> diary.html</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      1 &lt;!-- This document was created with HomeSite v2.5 --&gt;
      2 &lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN"&gt;
      3 &lt;html&gt;
      4
      5 &lt;head&gt;
      6
      7
      8 &lt;script type="text/javascript" src="/static/js/analytics.js"&gt;&lt;/script&gt;
      9 &lt;script type="text/javascript"&gt;archive_analytics.values.server_name="www
      9 b-app6.us.archive.org";archive_analytics.values.server_ms=105;&lt;/script&gt;
     10 &lt;link type="text/css" rel="stylesheet" href="/static/css/banner-styles.c
     10 ss"/&gt;
     11
     12
     13 &lt;title&gt;Piper's Diary&lt;/title&gt;
     14 &lt;meta name="description"
     15 content="Come visit our shih tzu, Piper.  He has his very own photo gall
     15 ary, monthly diary, newsletter, and dog site award.  He also maintains d
     15 og book reviews and quotations.  Come check him out!"&gt;
     16 &lt;meta name="keywords"
     17 content="shih tzu, dog, pet, quotations, award, diary, advice, book, rev
     17 iew, piper"&gt;
     18 &lt;style TYPE="text/css" TITLE="Basic Fonts"&gt;
</code></pre>
</div>
<p>We’re going to start by using the <code>sed</code> command. The
command allows you to edit files directly.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> sed <span class="st">'265,330d'</span> diary.html <span class="op">&gt;</span> diary-nofoot.txt</span></code></pre>
</div>
<p>The command <code>sed</code> in combination with the <code>d</code>
value will look at <code>diary.html</code> and delete all values between
the rows specified. The <code>&gt;</code> action then prompts the script
to this edited text to the new file specified.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> sed <span class="st">'1,221d'</span> diary-nofoot.txt <span class="op">&gt;</span> diary-noheadfoot.txt</span></code></pre>
</div>
<p>This does the same as before, but for the header.</p>
<p>You now have a cleaner text. The next step is to prepare it even
further for rigorous analysis.</p>
<p>First we wil remove all the html tags. Type and run:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> sed <span class="at">-e</span> <span class="st">'s/&lt;[^&gt;]*&gt;//g'</span> diary-noheadfoot.txt <span class="op">&gt;</span> diary-notags.txt</span></code></pre>
</div>
<p>Here we are using a regular expression (see the <a href="https://librarycarpentry.org/lc-data-intro/01-regular-expressions" class="external-link">Library
Carpentry regular expression lesson</a> to find all valid html tags
(anything within angle brackets) and delete them). This is a complex
regular expression, so don’t worry too much about how it works! The
script also requires the use of both the output redirect
<code>&gt;</code> we have seen and the input redirect <code>&lt;</code>
we haven’t seen.</p>
<p>We’re going to start by using the <code>tr</code> command, used for
translating or deleting characters. Type and run:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> tr <span class="at">-d</span> <span class="st">'[:punct:]\r'</span> <span class="op">&lt;</span> diary-notags.txt <span class="op">&gt;</span> diary-notagspunct.txt</span></code></pre>
</div>
<p>This uses the translate command and a special syntax to remove all
punctuation (<code>[:punct:]</code>) and carriage returns
(<code>\r</code>).</p>
<p>Finally regularise the text by removing all the uppercase
lettering.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> tr <span class="st">'[:upper:]'</span> <span class="st">'[:lower:]'</span> <span class="op">&lt;</span> diary-notagspunct.txt <span class="op">&gt;</span> diary-clean.txt</span></code></pre>
</div>
<p>Open the <code>diary-clean.txt</code> in a text editor. Note how the
text has been transformed ready for analysis.</p>
</div>
<div class="section level3">
<h3 id="pulling-a-text-apart-counting-word-frequencies-2">Pulling a text apart, counting word frequencies<a class="anchor" aria-label="anchor" href="#pulling-a-text-apart-counting-word-frequencies-2"></a>
</h3>
<p>We are now ready to pull the text apart.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> tr <span class="st">' '</span> <span class="st">'\n'</span> <span class="op">&lt;</span> diary-clean.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="at">-c</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-nr</span> <span class="op">&gt;</span> diary-final.txt</span></code></pre>
</div>
<p>Here we’ve made extended use of the pipes we saw in <a href="05-counting-mining.html">Counting and mining with the shell</a>.
The first part of this script uses the translate command again, this
time to translate every blank space into <code>\n</code> which renders
as a new line. Every word in the file will at this stage have its own
line.</p>
<p>The second part uses the <code>sort</code> command to rearrange the
text from its original order into an alphabetical configuration.</p>
<p>The third part uses <code>uniq</code>, another new command, in
combination with the <code>-c</code> flag to remove duplicate lines and
to produce a word count of those duplicates.</p>
<p>The fourth and final part sorts the text again by the counts of
duplicates generated in step three.</p>
<p>We have now taken the text apart and produced a count for each word
in it. This is data we can prod and poke and visualise, that can form
the basis of our investigations, and can compare with other texts
processed in the same way. And if we need to run a different set of
transformation for a different analysis, we can return to
<code>diary-final.txt</code> to start that work.</p>
<p>And all this using a few commands on an otherwise unassuming but very
powerful command line.</p>
</div>
</section><section><h2 class="section-heading" id="where-to-go-next">Where to go next<a class="anchor" aria-label="anchor" href="#where-to-go-next"></a>
<a class="anchor" aria-label="anchor" href="#where-to-go-next"></a>
</h2>
<hr class="half-width">
<ul>
<li>Deborah S. Ray and Eric J. Ray, <em>Unix and Linux: visual
quickstart guide</em>, 4th edition (2009). Invaluable (and not
expensive) as a reference guide - especially if you only use the command
line sporadically!</li>
<li>
<a href="https://learncodethehardway.org/unix/" class="external-link">The Command Line
Crash Course</a>. ‘Learn UNIX the Hard Way’ – good for reminders of the
basics.</li>
<li>
<a href="https://automatetheboringstuff.com/" class="external-link">Automate the Boring
Stuff</a>.</li>
<li>Another Coursera course, <a href="https://www.coursera.org/course/pythonlearn" class="external-link">Programming for
Everybody (Python)</a> is available and lasts 10 weeks, if you have 2-4
hours to spare per week. Python is popular in research programming as it
is readable, relatively simple, and very powerful.</li>
<li>Bill Turkel and the Digital History community more broadly. The
second lesson you did today was based on a lesson Bill has on <a href="https://williamjturkel.net/2013/06/15/basic-text-analysis-with-command-line-tools-in-linux/" class="external-link">his
website</a> and Bill is also a general editor of the <a href="https://programminghistorian.org/project-team" class="external-link">Programming
Historian</a>. The Programming Historian is an open, collaborative book
aimed at providing programming lessons to historians. Although the
lessons are hooked around problems historians have, their lessons -
which cover various programming languages - have a wide applicability -
indeed today’s course is based on two lessons I wrote with Ian Milligan,
an historian at Waterloo, Canada - for ProgHist. Bill also has a
wonderful tutorial on <a href="https://williamjturkel.net/2013/06/30/named-entity-recognition-with-command-line-tools-in-linux/" class="external-link">‘Named
Entity Recognition with Command Line Tools in Linux’</a> which I
thoroughly recommend if you want to automatically find, markup, and
count names, places, and organisations in text files…</li>
</ul></section><section><h2 class="section-heading" id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<hr class="half-width">
<p>In this session you have learned to navigate the Unix shell, to
undertake some basic file counting, concatenation and deletion, to query
across data for common strings, to save results and derived data, and to
prepare textual data for rigorous computational analysis.</p>
<p>This only scratches the surface of what the Unix environment is
capable of. It is hoped, however, that this session has provided a
taster sufficient to prompt further investigation and productive
play.</p>
<p>Keep in mind that the full potential the tools can offer may only
emerge upon embedding these skills into real projects. Nonetheless,
being able to manipulate, count and mine thousands of files is extremely
useful. Even a large collection of files which do not contain any
alpha-numeric data elements, such as image files, can be easily sorted,
selected and queried depending on the amount of description, of metadata
contained in each filename. If not a prerequisite of working with the
Unix, then taking the time to structure your data in a consistent and
predictable manner is certainly a significant step towards getting the
most out of Unix commands. And if you can find a way of using the Unix
shell regularly - perhaps only to copy or amend files - you’ll keep the
basics fresh, meaning that next time you have cause to use the Unix
shell for more complex commands, you shouldn’t need to learn it all over
again.</p>
</section><section><h2 class="section-heading" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<hr class="half-width">
<ul>
<li>James Baker and Ian Milligan, ‘Counting and mining research data
with Unix’, <em>The Programming Historian</em> (<a href="https://programminghistorian.org/lessons/research-data-with-unix" class="external-link">2014</a>).</li>
<li>Ian Milligan and James Baker, ‘Introduction to the Bash Command
Line’, <em>The Programming Historian</em> (<a href="https://programminghistorian.org/lessons/intro-to-bash" class="external-link">2014</a>).</li>
<li>William J. Turkel, ‘Named Entity Recognition with Command Line Tools
in Linux’ (<a href="https://williamjturkel.net/2013/06/30/named-entity-recognition-with-command-line-tools-in-linux/" class="external-link">30
June 2013</a>). The section ‘NER Demo’ is adapted from this and shared
under a <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" class="external-link">Creative
Commons Attribution-NonCommercial-ShareAlike 3.0 Unported</a>.</li>
<li>William J. Turkel, ‘Basic Text Analysis with Command Line Tools in
Linux’ (<a href="https://williamjturkel.net/2013/06/15/basic-text-analysis-with-command-line-tools-in-linux/" class="external-link">15
June 2013</a>). The sections ‘Grabbing a text, cleaning it up’ and
‘Pulling a text apart, counting word frequencies’ are adapted from this
and shared under a <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" class="external-link">Creative
Commons Attribution-NonCommercial-ShareAlike 3.0 Unported</a>.</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Shell tools can be combined to powerful effect</li>
</ul>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/librarycarpentry/lc-shell/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/librarycarpentry/lc-shell/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/librarycarpentry/lc-shell/" class="external-link">Source</a></p>
				<p><a href="https://github.com/librarycarpentry/lc-shell/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.5" class="external-link">sandpaper (0.16.5)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.3" class="external-link">varnish (1.0.3)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://librarycarpentry.github.io/lc-shell/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://librarycarpentry.github.io/lc-shell/aio.html",
  "identifier": "https://librarycarpentry.github.io/lc-shell/aio.html",
  "dateCreated": "2018-04-12",
  "dateModified": "2024-07-16",
  "datePublished": "2024-07-16"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

